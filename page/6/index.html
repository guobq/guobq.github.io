<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords"><meta name="author" content="bq,undefined"><meta name="copyright" content="bq"><title>【bq's notes】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!-- link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!-- link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!-- script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"8ICB0LL54F","apiKey":"b6e01221a0e1bdb34d69e088b9bd39d8","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  gitment: {},
  valine: {"appId":"8xUuEcUoXahLwm69LVK1eumF-gzGzoHsz","appKey":"NDF5dcJsxuEHHBOLlda7Y07b"},
}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="bq's notes" type="application/atom+xml">
</head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="author-info"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">bq</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/guobq" target="_blank">GitHub<i class="icon-dot bg-color6"></i></a><a class="links-button button-hover" href="mailto:2278220079@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color4"></i></a><a class="links-button button-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2278220079&amp;site=qq&amp;menu=yes" target="_blank">QQ<i class="icon-dot bg-color9"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">73</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">73</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">25</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">bq's notes</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><div id="recent-posts"><!-- each post in page.posts.sort('date', -1).limit(10).toArray()--><!-- config中配置按照什么排序--><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/a3dccc19.html">测试方案，策略，计划，用例</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-04-11</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/">Test</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/%E7%90%86%E8%AE%BA/">理论</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Test/">Test</a></div></div><div class="post-content"><div class="main-content content"><blockquote>
<p><em>测试计划提出“做什么”，测试方案明确“如何做”，测试方案需要在测试计划的指导下进行。</em></p>
</blockquote>
<h3 id="测试计划"><a href="#测试计划" class="headerlink" title="测试计划"></a>测试计划</h3><p>是对测试全过程的组织、资源、原则等进行规定和约束，并制定测试全过程各个阶段的任务以及时间进度安排，并提出对各项任务的评估、风险分析和管理需求。简言之，测试计划是从<strong>管理角度</strong>对整个测试活动进行规划和控制。</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>背景、项目简介、目的、测试范围、测试策略、人员分工、资源要求、进度计划、参考文档、常用术语、提交文档、风险分析</p>
<p>1.概述<br>项目背景、测试范围（所需测试的特性）、参考文档（需求文档、会议记录、同类项目的参考说明）<br>2.组织形式<br>测试涉及人员及其职责的划分<br>3.测试范围<br>确定被测特性有哪些，然后按照功能性、非功能性的分类，对系统模块&amp;子模块进行划分，重要级别的设置<br>4.测试通过与否的标准<br>根据对测试系统的预判，与项目经理协商并由其确认来定义项目通过&amp;不通过的准则（如：测试覆盖率、缺陷修复率…）<br>5.测试挂起&amp;恢复条件<br>1）测试挂起：考虑测试过程中发生一些内外部问题致使测试受阻，用例无法执行的情形，由项目经理确认<br>2）测试恢复：导致阻塞的问题确认已被修复后，由项目经理确认恢复测试<br>6.测试进度人力分布计划<br>计划编制原则：<br>1）尽量准确预估整个测试活动所需的人力和持续时间<br>2）讲一个阶段分成若干个能进行有效监控的小阶段<br>3）计划结构和进度须清晰明了，便于阅览、检查<br>4）结构包括：任务、负责人、检查人、时间进度条</p>
<p>制定项目测试过程中的测试重点，各个阶段的任务分配以及时间进度安排，并提出对各项任务的评估，风险分析，可以包括测试策略。</p>
<h3 id="测试方案"><a href="#测试方案" class="headerlink" title="测试方案"></a>测试方案</h3><p>是描述被测对象需要测试的特性、测试的方法、测试环境的规划、测试工具的设计和选择、测试用例的设计方法、测试代码的设计方案。简言之，测试方案是从<strong>技术角度</strong>对整个测试活动进行规划和控制。</p>
<h4 id="内容-1"><a href="#内容-1" class="headerlink" title="内容"></a>内容</h4><p><strong>1.概述</strong><br> 描述软件项目的背景（如：项目名称、项目时间、项目目的）、测试范围、参考文档<br> <strong>2.测试环境</strong><br> 1）软硬件环境<br> 硬件设备：电脑配置、无线路由器、手机…<br> 软件设备：应用服务器、数据库服务器-型号&amp;版本<br> 2）网络构成<br> 测试环境的网络结构、拓扑图<br> 3）环境搭建<br> 测试所需的环境搭建步骤、要求、注意事项<br> 4）测试工具<br> 所需的测试工具，如：LR、Jmeter、Postman、AppScan、AWVS…<br> <strong>3.测试策略</strong><br> 说明此项目将要采取哪些测试手段与方法<br> 结构包括：功能性/非功能性-系统模块&amp;子模块、测试要点、测试要点说明、测试数据描述、优先级、测试方法、用例设计方法<br> <strong>4.测试风险评估与预防</strong><br> 评估项目测试过程中可能存在的风险，设置不同的风险等级，并提前分析相应的预防措施<br> 结构包括：风险描述、风险等级、风险来源、产生阶段、预防措施、对策责任人</p>
<p>侧重测试的方法，测试环境的规划，测试工具的设计和选择，测试用例的设计方法，测试代码的设计方案。</p>
<h3 id="测试策略"><a href="#测试策略" class="headerlink" title="测试策略"></a>测试策略</h3><p>如何用尽量少的资源来尽量好的完成测试，给测试活动提供技术上的明确指导，以便测试活动的实施者能够很快的开展自己的工作。</p>
<p>侧重需求分析，评估风险，定义测试范围，确定测试方法，制定测试启动、停止、完成标准和条件。</p>
<blockquote>
<p>宏观角度:在不同的项目背景下，根据产品需求和指标，分析产品的功能项和业务逻辑，并判断测试的重点和方向，在当前有限的条件下，统筹各方资源、采取合理有效的方法来推动项目的测试活动开展，以最少的软硬件、人力资源投入得到最佳的测试效果，达到符合当前环境的最优决策。</p>
</blockquote>
<blockquote>
<p>微观角度:可以归属到测试方案中的一个重要组成项，通过采用有效的测试手段与方法，对产品模块&amp;子模块进行划分，明确测试要点，然后按照功能性与非功能性（易用性、兼容性、性能、安全性…）的分类，明确所采用的测试方法（黑盒/白盒/单元/集成/系统/回归/验收…）、用例设计方法（等价类、边界值、流程分析法、），并设置不同的测试优先级，从而指导后面编写测试用例等工作的开展。</p>
</blockquote>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><p>根据测试计划，制定完成测试任务的具体测试步骤。</p>
<h4 id="测试用例设计的原则"><a href="#测试用例设计的原则" class="headerlink" title="测试用例设计的原则"></a>测试用例设计的原则</h4><blockquote>
<p>代表性：能够代表并覆盖各种合理的和不合理、合法的和非法的、边界的和越界的、以及极限的输入数据、操作和环境设置等.</p>
<p>可判定性：即测试执行结果的正确性是可判定的，每一个测试用例都应有相应的期望结果.</p>
<p>可再现性：即对同样的测试用例，系统的执行结果应当是相同的。</p>
</blockquote>
</div></div><a class="button-hover more" href="/bq/a3dccc19.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/926a2b5e.html">cmmi需求相关</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-04-11</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E4%BD%93%E7%B3%BB/">体系</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E4%BD%93%E7%B3%BB/%E8%BF%87%E7%A8%8B%E8%B4%A8%E9%87%8F/">过程质量</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/cmmi/">cmmi</a></div></div><div class="post-content"><div class="main-content content"><h3 id="需求阶段"><a href="#需求阶段" class="headerlink" title="需求阶段"></a>需求阶段</h3><h4 id="需求管理（-RM-）"><a href="#需求管理（-RM-）" class="headerlink" title="需求管理（ RM ）"></a>需求管理（ RM ）</h4><h5 id="SG1-管理需求"><a href="#SG1-管理需求" class="headerlink" title="SG1 管理需求"></a>SG1 管理需求</h5><p>SP1.1 理解需求：与需求的提供者对需求的含义达成一致</p>
<p>SP1.2 获得对需求的承诺：获得项目组成员对需求的承诺</p>
<p>SP1.3 管理需求的变更：在项目进行中，管理需求的变更</p>
<p>SP1.4 维护需求的双向可跟踪性：维护需求和工作产品之间的双向可跟踪性</p>
<p>SP1.5 确定项目工作和需求间的差异：识别项目计划、工作产品和需求之间的不一致</p>
<h4 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h4><p>1.因为项目进度赶等原因，在很多需求还没有明确情况下，便开始开发的工作。<br>2.开始客户只能提出模糊的需求，客户喜欢先让你做个东西给他看，然后他才可能逐渐提出真正的需求，而需求调研人员，对此没有什么好的处理办法。<br>3.客户以种种原因不签需求，项目组在不签需求的情况下，便开始开发工作。<br>4.客户不承认之前提出来的需求，项目组又不能得失客户，项目成员苦不堪言。<br>5.需求经常变化，无法控制。<br>6.设计、代码与需求不对应，特别是需求变更时，不知道应该修改哪部分，也不知道会有哪些影响。</p>
<h4 id="SG1"><a href="#SG1" class="headerlink" title="SG1"></a>SG1</h4><p>管理需求并且识别出需求与项目计划、工作产品不一致的地方。</p>
<p>1.需求要被管理，被管理的意思又有两层：一是需求要被确认，二是要控制需求变更</p>
<p>2.需求要用来指导下游的工作产品，如：计划、设计、测试等</p>
<h4 id="SP1-1：理解需求。"><a href="#SP1-1：理解需求。" class="headerlink" title="SP1.1：理解需求。"></a>SP1.1：理解需求。</h4><p>Develop an understanding with the requirements providers on the meaning of the requirements.</p>
<p>开发者应该理解客户的需求，如果这点做不到，后面的工作是没有意义的。所以，那种在没有理解需求的情况下，就仓促开发的做法是不合适的。</p>
<p>当然，如果想通过做原型来获取需求不在此列，另外，大家也千万不要误解，在没有完全理解需求前一定不能开展开发工作，如果部分需求已经掌握，有部分需求还没有掌握，那也是可以先开展已掌握部分需求的设计、编码工作的，这时需要考虑没有确定部分的需求对这些工作可能带来的影响。</p>
<h4 id="SP1-2：确认需求"><a href="#SP1-2：确认需求" class="headerlink" title="SP1.2：确认需求"></a>SP1.2：确认需求</h4><p>Obtain commitment to the requirements from the project participants.</p>
<p>就是要和客户签署需求。</p>
<p>我想大家都非常理解这点的重要性，但大家可能会说，说得容易，客户就是不签，咋办？客户不签需求，主要是两方面的原因：</p>
<p>1)客户不确定需求。</p>
<p>2)客户担心签了需求后，他就不好变了。</p>
<p>把SP1理解需求做好，可以参考需求开发(RD)</p>
<p>消除客户的顾虑，签署需求是双方约束，另外需求是可以变的，现在签署只是标志着当前的一个工作里程碑，当前签订的需求作为后续工作的基准。</p>
<h4 id="SP1-3：管理需求变更"><a href="#SP1-3：管理需求变更" class="headerlink" title="SP1.3：管理需求变更"></a>SP1.3：管理需求变更</h4><p>Manage changes to the requirements as they evolve during the project.</p>
<p>需求不是不可以变，只不过需要管理。</p>
<p>1.要充分理解客户提出来的需求变更，深究其原因，不能客户一说变就变，超过一半的客户变更要求，其实都是不合理的，或者是有其它更好的替代办法的。</p>
<p>2.变更要求，要有记录和确认</p>
<p>3.需求变更的影响，包括增加的工作量，风险等。要有清单并确认</p>
<p>4.需求变更导致项目成本和进度变化太大，走决策</p>
<h4 id="SP1-4-：维护需求的双向跟踪"><a href="#SP1-4-：维护需求的双向跟踪" class="headerlink" title="SP1.4 ：维护需求的双向跟踪"></a>SP1.4 ：维护需求的双向跟踪</h4><p>Maintain bidirectional traceability among the requirements and the project plans and work products.</p>
<p>需求是用来指导后续工作的，所以需求与计划、设计、编码、测试等后续工作都需要维护好对应的关系，与SP1.3关系密切</p>
<p>双向跟踪是指纵向和横向跟踪，纵向跟踪的意思是上下游工作产品之间的跟踪关系。而横向跟踪指的是需求与需求之间的关系、设计与设计之前的关系、代码与代码之间的关系等。其中一个需求变化了，有可能影响另外一些需求，其中一个设计变了也可能影响另外一些设计。</p>
<p>这是个双向跟踪网络，任何一点发生变化，能找出全部受牵连的地方。</p>
<h4 id="SP1-5：识别出需求与下游工作产品不一致的地方"><a href="#SP1-5：识别出需求与下游工作产品不一致的地方" class="headerlink" title="SP1.5：识别出需求与下游工作产品不一致的地方"></a>SP1.5：识别出需求与下游工作产品不一致的地方</h4><p>Identify inconsistencies between the project plans and work products and the requirements.</p>
<p>1.需求变更时，利用双向跟踪表找出需要修改的地方，并用跟踪表来发现不一致的地方并调整。</p>
<p>2.编写或者修改计划、设计、代码、测试计划、测试用例等需求下游工作产品的时候，要注意要与需求保持一致。</p>
<h4 id="需求开发（-RD-）"><a href="#需求开发（-RD-）" class="headerlink" title="需求开发（ RD ）"></a>需求开发（ RD ）</h4><h5 id="内容"><a href="#内容" class="headerlink" title="内容:"></a>内容:</h5><p>​      SG1 开发客户需求：收集共同利益者的需求、期望、限制条件和接口，并且把它们转换成客户需求。</p>
<p>​        SP1.1 获得客户需求：导出产品生存周期所有阶段共利同益者的需求、期望、限制条件和接口。</p>
<p>​        SP1.2 生成客户需求：把共同利益者的需求、期望、限制条件和接口转换成客户需求。</p>
<p>​      SG2 开发产品需求：对客户需求加以精炼和细化，以便开发产品生存周期中的产品和产品构件需求。</p>
<p>​        SP2.1 建立产品需求和构件需求：根据客户需求，为保证产品和产品构件的有效性和可提供性，确定产品和产品构件需求。</p>
<p>​        SP2.2 分配产品构件需求：为每个产品构件分配需求。</p>
<p>​        SP2.3 确定接口需求：确定功能之间或对象之间的接口。</p>
<p>​      SG3 分析和确认需求：对各项需求进行分析和确认，并且开发所要求的功能度的定义。</p>
<p>​        SP3.1 建立操作概念和场景：建立并维护操作概念和场景。</p>
<p>​        SP3.2 定义功能需求：建立并维护所要求的功能度的定义。</p>
<p>​        SP3.3 分析需求：分析派生的需求，确保它们是必要的和充分的。</p>
<p>​        SP3.4 平衡需求：分析需求，平衡共同利益者的需求和约束。</p>
<p>​        SP3.5 确认需求：在适当时候，采用多种技术确认需求，以确保将要产生的产品能在预计的用户环境中恰当运行。</p>
<h5 id="需求开发没有做好的原因"><a href="#需求开发没有做好的原因" class="headerlink" title="需求开发没有做好的原因"></a>需求开发没有做好的原因</h5><p>大部分是没有把握好客户需求，直接进入软件的细节，去讨论要做什么功能，界面要怎样设计去了，而忘记了软件的根本目的是为了解决什么问题。</p>
<p>当我们明确客户需求后，就应该把客户需求转变成产品需求和产品组件需求，客户需求一般都是比较高层次的，而且描述也会比较简单，不能作为日后验收的标准，我们需要对软件的规格进行说明。一般来说，我们写的软件规格说明书都会包含产品需求和产品组件需求的。我们导出产品需求和产品组件需求的时候，要注意产品需求和产品组件需求，必须和客户需求对应起来，通常是多对多的关系。为什么要对应起来？我们要保证，软件的每一个界面，每一个功能都是有用的，都是“源自”客户需求的，这样才能保证我们做的事情都是正确的事情，防止被不相干的事情干扰。</p>
<p>我们经常抱怨客户的需求在变，其实80%的原因是没有把握住客户需求，其实客户经常变的是产品需求或者是产品组件需求，客户需求是很少变的，就是因为我们没有把握住客户到底想要什么、需要什么，导致我们认为客户太难“服侍”了。只有把握住客户真正的需求，我们才能抓住根本，万变不离其中</p>
<p>需求管理强调的是需求的确认以及需求变更的控制，而需求开发讲究的是用系统的方法获取真正的全面的能实现的需求。<br>以上两个关于需求开发的例子，都是反面教材，都没有能很好地把握需求，一个没有抓住问题的关键，一个没有能找到真正的需求提供者来获取需求。</p>
<h5 id="理解好需求开发"><a href="#理解好需求开发" class="headerlink" title="理解好需求开发"></a>理解好需求开发</h5><p>需要先理解清楚以下几个关键的概念：<br>1)客户需求(Customer Requirements)<br>2)产品需求(Product Requirements)<br>3)产品组件需求(Product Component Requirements)</p>
<p>客户需求是可以理解成客户为什么要做本系统，要解决什么问题，客户对系统有怎样的期望，希望能具备一些怎样的特点，简单的说，就是客户的需要是什么。<br>产品需求是能满足客户需求，并对软件产品规格进行了详细描述的需求，软件设计师可以根据产品需求进行设计、编码等工作。<br>产品组件需求，是对产品需求的进一步细化，产品可能会分割成几个子系统、几个部分，每个子系统每部分要具备怎样的功能、要具备怎样的性能、接口要求等，这些可以认为是产品组件需求。</p>
<p>从另外一个角度，需求可以分为功能性需求和非功能性需求两类，功能性需求就是系统具备怎样的功能，能做什么事情，而非功能性需求就是指系统要具备怎样的性能、安全级别等方面的要求。客户需求、产品需求和产品组件需求，都会包含功能需求和非功能需求。</p>
<h4 id="各项内容说明"><a href="#各项内容说明" class="headerlink" title="各项内容说明"></a>各项内容说明</h4><h5 id="SG1-干系人的需要、期望、约束和接口要求被收集并转化为客户需求"><a href="#SG1-干系人的需要、期望、约束和接口要求被收集并转化为客户需求" class="headerlink" title="SG1: 干系人的需要、期望、约束和接口要求被收集并转化为客户需求"></a>SG1: 干系人的需要、期望、约束和接口要求被收集并转化为客户需求</h5><p>Stakeholder needs,expectations,constraints,and interfaces are collected and translated into customer requirements.</p>
<h5 id="SP-1-1-导出干系人对整个产品生命周期各阶段的需要、期望、约束和接口要求等"><a href="#SP-1-1-导出干系人对整个产品生命周期各阶段的需要、期望、约束和接口要求等" class="headerlink" title="SP 1.1: 导出干系人对整个产品生命周期各阶段的需要、期望、约束和接口要求等"></a>SP 1.1: 导出干系人对整个产品生命周期各阶段的需要、期望、约束和接口要求等</h5><p>Elicit stakeholder needs,expectations,constrains,and interfaces for all phases of the product life cycle.<br>1)干系人：干系人除了指甲方的领导、系统的最终用户，还包括使用本系统的第三方以及与本系统有交互的第三方系统的拥有者、使用者等。<br>2)产品生命周期各阶段：干系人对系统的期望不一定只限于软件功能的，可能还包括数据的整理、资料录入、安装培训、维护要求等，干系人可能对软件生产的过程阶段都会提出他的要求，获取需求的时候，要注意干系人在软件生命周期不同阶段有什么要求。<br>3)需要、期望、约束、接口要求：甲方一般会对系统的目标、范围、解决什么问题、希望系统具备怎样的一些特性，满足一些什么接口要求和约束条件等，都会有大致的想法。需求调研工作，首先要注意搞清楚这些内容。<br>4)导出：客户的原始想法可能是不明确的，或者是客户一时难表达完整的，我们需要用一定的方法，让客户能完整无遗漏准确地表达出他的想法。通常我们可以通过<strong>原型、图示、类比、问卷</strong>等办法来导出客户的需求。</p>
<h5 id="SP-1-2-转化干系人的需要、期望、约束和接口要求为客户需求"><a href="#SP-1-2-转化干系人的需要、期望、约束和接口要求为客户需求" class="headerlink" title="SP 1.2: 转化干系人的需要、期望、约束和接口要求为客户需求"></a>SP 1.2: 转化干系人的需要、期望、约束和接口要求为客户需求</h5><p>Transform stakeholder needs,expectations,constraints,and interfaces into customer requirements.</p>
<p>SP1.1讲述的是通过一些方法记录客户原始的需求信息，而SP1.2讲述的就是把客户原始的需求信息整理成正式的客户需求，通常会包括对系统目标、范围、解决问题、软件特性、接口要求等有详细的描述。</p>
<h5 id="SG2-客户需求是精确和详细的，以用来开发产品需求和产品组件需求"><a href="#SG2-客户需求是精确和详细的，以用来开发产品需求和产品组件需求" class="headerlink" title="SG2: 客户需求是精确和详细的，以用来开发产品需求和产品组件需求"></a>SG2: 客户需求是精确和详细的，以用来开发产品需求和产品组件需求</h5><p>Customer requirements are refined and elaborated to develop product and product-components requirements.</p>
<p>SG1讲述的是导出客户需求，而SG2讲述的是由客户需求到产品需求、产品组件需求的过程。</p>
<h5 id="SP-2-1-建立和维护产品和产品组件需求，这些产品和产品组件需求是基于客户需求的"><a href="#SP-2-1-建立和维护产品和产品组件需求，这些产品和产品组件需求是基于客户需求的" class="headerlink" title="SP 2.1: 建立和维护产品和产品组件需求，这些产品和产品组件需求是基于客户需求的"></a>SP 2.1: 建立和维护产品和产品组件需求，这些产品和产品组件需求是基于客户需求的</h5><p>Establish and maintain product and product-component requirements,which are based on the customer requirements.<br>产品和产品组件需求，是比较细致的需求，会详细描述软件与用户是怎样交互的，用户需要输入什么，系统会输出什么等都会比较详细描述出来。而客户需求一般只描述能实现什么功能、解决什么问题等，比较高层次。<br>客户需求一般是难以验证是否已实现的，而产品需求和产品组件需求是对软件规格的描述，是可以用来做为验收的标准的。</p>
<h5 id="SP-2-2-分配需求给每一个产品组件"><a href="#SP-2-2-分配需求给每一个产品组件" class="headerlink" title="SP 2.2: 分配需求给每一个产品组件"></a>SP 2.2: 分配需求给每一个产品组件</h5><p>Allocate the requirements for each product component.</p>
<p>这个SP将需求开发与技术解决方案联系起来，所有的需求应该与设计的产品组件对应起来，保证需求驱动后续的设计工作，同时也保证设计都是为了需求服务的。SP2.2是对SP2.1的进一步细化。</p>
<h5 id="SP-2-3-定义接口需求"><a href="#SP-2-3-定义接口需求" class="headerlink" title="SP 2.3: 定义接口需求"></a>SP 2.3: 定义接口需求</h5><p> Identify interface requirements<br>接口需求包括系统与第三方的系统的接口要求，也包括系统本身各组件、各子系统、各部分之间的接口要求。通常这些接口需求在客户需求级别的时候，并不是很明细，需要对客户需求进一步细分成产品需求、产品组件需求，然后发掘出接口需求。SP2.3也是对SP2.1的进一步深化。</p>
<h5 id="SG3-需求被分析和确认，并定义出具体的功能性需求"><a href="#SG3-需求被分析和确认，并定义出具体的功能性需求" class="headerlink" title="SG3:需求被分析和确认，并定义出具体的功能性需求"></a>SG3:需求被分析和确认，并定义出具体的功能性需求</h5><p>The requirements are analyzed and validated,and a definition of required functionality is developed.</p>
<h5 id="SP-3-1-建立和维护操作场景及相关情景"><a href="#SP-3-1-建立和维护操作场景及相关情景" class="headerlink" title="SP 3.1: 建立和维护操作场景及相关情景"></a>SP 3.1: 建立和维护操作场景及相关情景</h5><p>Establish and maintain operational concepts and associated scenarios.</p>
<h5 id="SP-3-2-建立和维护功能定义"><a href="#SP-3-2-建立和维护功能定义" class="headerlink" title="SP 3.2: 建立和维护功能定义"></a>SP 3.2: 建立和维护功能定义</h5><p>Establish and maintain a definition of required functionality.</p>
<p>SP3.1和SP3.2是对需求描述的要求，要求描述出具体需求的操作场景、上下文，具体的操作步骤，对功能的详细描述等。通常我们可以通过UML的Use Case图或者是序列图等来表达这些内容。</p>
<h5 id="SP-3-3-分析需求以确认需求是必须和充分的"><a href="#SP-3-3-分析需求以确认需求是必须和充分的" class="headerlink" title="SP 3.3: 分析需求以确认需求是必须和充分的"></a>SP 3.3: 分析需求以确认需求是必须和充分的</h5><p>Analyze requirements to ensure that they are necessary and sufficient.</p>
<h5 id="SP-3-4-分析需求平衡以平衡干系人的需要和约束"><a href="#SP-3-4-分析需求平衡以平衡干系人的需要和约束" class="headerlink" title="SP 3.4: 分析需求平衡以平衡干系人的需要和约束"></a>SP 3.4: 分析需求平衡以平衡干系人的需要和约束</h5><p>Analyze requirements to balance stakeholder needs and constrains.</p>
<p>SP3.3和SP3.4是对需求的准确性、全面性、可实现性方面的要求，除了要取得全面准确地需求，还需要平衡约束条件，保证需求在约束条件下是可实现的。</p>
<h5 id="SP-3-5-用各种合适的方法确认需求，确保最终产品能在用户的环境中按照设想运行"><a href="#SP-3-5-用各种合适的方法确认需求，确保最终产品能在用户的环境中按照设想运行" class="headerlink" title="SP 3.5: 用各种合适的方法确认需求，确保最终产品能在用户的环境中按照设想运行"></a>SP 3.5: 用各种合适的方法确认需求，确保最终产品能在用户的环境中按照设想运行</h5><p>Validate requirements to ensure the resulting product will perform as intended in the user’s environment using multiple techniques as appropriate.</p>
<p>这是需求开发的最后一步了，需求导出过程中尽管用了很多办法，但需求确认的时候，仍然需要采取办法确保获取的需求是符合最终的使用场景要求。</p>
<p>SP3.3、SP3.4和SP3.5，通常是通过需求评审来满足的。</p>
</div></div><a class="button-hover more" href="/bq/926a2b5e.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/23d474b0.html">kubernetes 1.12.2版本安装</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-06-03</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/%E8%99%9A%E6%8B%9F%E5%8C%96/">虚拟化</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/docker/">docker</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/k8s/">k8s</a></div></div><div class="post-content"><div class="main-content content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>准备两台机器：master,node</p>
<p>ip: master:192.168.13.129</p>
<p>node1:192.168.1.130</p>
<p>环境：centos7</p>
<h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><p>docker版本最高支持18.06,高于要此版本报错</p>
<p>kubernetes12.2+docker-ce18.06.1ce</p>
<h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><p>在master和node 端执行：</p>
<p>1：安全策略规则配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">setenforce 0</span><br><span class="line">iptables -F</span><br><span class="line">iptables -t nat -F</span><br><span class="line">iptables -I FORWARD -s 0.0.0.0/0 -d 0.0.0.0/0 -j ACCEPT </span><br><span class="line">yum -y install ntp</span><br><span class="line">ntpdate pool.ntp.org</span><br><span class="line">systemctl start ntpd</span><br><span class="line">systemctl enable ntpd</span><br></pre></td></tr></table></figure>

<p>2：内核设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 关闭selinux</span></span><br><span class="line">vim /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disable</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改内核参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash">vim /etc/sysctl.conf </span></span><br><span class="line">net.ipv4.ip_forward=1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 1</span><br><span class="line">vm.swappiness=0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭swap</span></span><br><span class="line">swapoff -a</span><br><span class="line"><span class="meta">#</span><span class="bash"> 注释自动挂载</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭selinux</span></span><br><span class="line">vim /etc/selinux/config </span><br><span class="line"><span class="meta">#</span><span class="bash"> 保存修改内核参数</span></span><br><span class="line">sysctl -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> 确保以下两个文件里面显示值为1：</span></span><br><span class="line">cat /proc/sys/net/bridge/bridge-nf-call-ip6tables</span><br><span class="line">cat /proc/sys/net/bridge/bridge-nf-call-ip6tables</span><br><span class="line"><span class="meta">#</span><span class="bash"> 每个节点都修改下面值，</span></span><br><span class="line">vim /etc/sysconfig/kubelet</span><br><span class="line">KUBELET_EXTRA_ARGS=&quot;fail-swap-on=false&quot;</span><br></pre></td></tr></table></figure>

<p>3：域名解析，免密登录，时间同步</p>
<p>a: 域名解析，master执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置示例</span></span><br><span class="line">cat /etc/hosts</span><br><span class="line">127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1 localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.13.129 master</span><br><span class="line">192.168.13.130 node</span><br></pre></td></tr></table></figure>

<p>b: 免密登录，master执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 生成密钥，直接回车</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置节点</span></span><br><span class="line">ssh-copy-id -i ~/.ssh/id_rsa k8n1</span><br><span class="line">ssh-copy-id -i ~/.ssh/id_rsa k8n2</span><br></pre></td></tr></table></figure>

<p>c:时间同步，master和node端分别执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ntp</span><br><span class="line">ntpdate pool.ntp.org</span><br><span class="line">systemctl start ntpd</span><br><span class="line">systemctl enable ntpd</span><br></pre></td></tr></table></figure>

<h3 id="安装docker-安装官方要求安装"><a href="#安装docker-安装官方要求安装" class="headerlink" title="安装docker:安装官方要求安装"></a>安装docker:安装官方要求安装</h3><p>配置docker-CE源 :master node都要配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils \</span><br><span class="line">device-mapper-persistent-data \</span><br><span class="line">lvm2</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">--add-repo \</span><br><span class="line">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<p>安装docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | sort -r</span><br><span class="line"><span class="meta">#</span><span class="bash"> 目前kubernetes1.12.2支持docker版本最多18.06,docker版本已经更新到18.9了，不能指只有yum安装最新版，要指定版本型号</span></span><br><span class="line">yum install docker-ce-18.06.1.ce</span><br></pre></td></tr></table></figure>

<p>配置自启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>

<h3 id="配置kubernetes源"><a href="#配置kubernetes源" class="headerlink" title="配置kubernetes源"></a>配置kubernetes源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br><span class="line">       http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看yum源</span></span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure>

<p>在master端安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure>

<p>查看到所需要的安装组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm config images list</span><br></pre></td></tr></table></figure>

<p>服务组件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">k8s.gcr.io/kube-apiserver:v1.12.2</span><br><span class="line">k8s.gcr.io/kube-controller-manager:v1.12.2</span><br><span class="line">k8s.gcr.io/kube-scheduler:v1.12.2</span><br><span class="line">k8s.gcr.io/kube-proxy:v1.12.2</span><br><span class="line">k8s.gcr.io/pause:3.1</span><br><span class="line">k8s.gcr.io/etcd:3.2.24</span><br><span class="line">k8s.gcr.io/coredns:1.2.2</span><br></pre></td></tr></table></figure>

<p>从dockerHub拉取镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker pull guobq/kube-apiserverv1.12.2</span><br><span class="line">docker pull guobq/kube-controller-manager:v1.12.2</span><br><span class="line">docker pull guobq/kube-scheduler:v1.12.2</span><br><span class="line">docker pull guobq/kube-proxy:v1.12.2</span><br><span class="line">docker pull guobq/pause:3.1</span><br><span class="line">docker pull guobq/etcd:3.2.24</span><br><span class="line">docker pull guobq/coredns:1.2.2</span><br></pre></td></tr></table></figure>

<p>给下载下来的镜像组件tag上和服务组件同样的标签</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> example</span></span><br><span class="line">docker tag guobq/kube-apiserverv1.12.2 k8s.gcr.io/kube-apiserver:v1.12.2</span><br></pre></td></tr></table></figure>

<h3 id="初始化集群"><a href="#初始化集群" class="headerlink" title="初始化集群"></a>初始化集群</h3><p>只在master端执行：（注意修改为master地址）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init \</span><br><span class="line">--kubernetes-version=v1.12.2 \</span><br><span class="line">--pod-network-cidr=10.244.0.0/16 \</span><br><span class="line">--apiserver-advertise-address=192.168.13.129</span><br></pre></td></tr></table></figure>

<p>master初始化之后会出现以下token，要复制下来保存好，加node要用：</p>
<p>kubeadm join 192.168.13.129:6443 –token bppavd.uo0spqpyn6g49fr1 –discovery-token-ca-cert-hash sha256:f526f033651e4f152d551f0950471c53401e95c0ce6b22ae63d3937dfa8fe057</p>
<p>如果忘记token，可以通过以下命令获得：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadmin token list</span><br></pre></td></tr></table></figure>

<p>此时root用户还不能使用kubelet控制集群需要，配置下环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可以直接放到~/.bash_profile</span></span><br><span class="line">echo &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot; &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="meta">#</span><span class="bash"> 对于非root用户</span></span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure>

<h3 id="部署fannel"><a href="#部署fannel" class="headerlink" title="部署fannel"></a>部署fannel</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f kube-flannel.yml</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/coreos/flannel/bc79dd1505b0c8681ece4de4c0d86c5cd2643275/Documentation/kube-flannel.yml">kube-flannel.yml</a>文件放在：<a target="_blank" rel="noopener" href="https://github.com/guobq/k8s/blob/master/kube-flannel/kube-flannel.yaml">https://github.com/guobq/k8s/blob/master/kube-flannel/kube-flannel.yaml</a></p>
<h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> root 用户执行</span></span><br><span class="line">kubectl get pods --all-namespaces</span><br><span class="line"><span class="meta">#</span><span class="bash"> node节点要安装的软件：</span></span><br><span class="line">yum install -y kubelet kubeadm kubectl</span><br><span class="line">vim /etc/sysconfig/kubelet</span><br><span class="line">KUBELET_EXTRA_ARGS=&quot;--fail-swap-on=false&quot;</span><br></pre></td></tr></table></figure>

<p>node节点要安装的docker镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kube-proxy:v1.12.2</span><br><span class="line">pause:3.1</span><br><span class="line">kuberneter/coredns:1.2.2</span><br><span class="line">etcd:3.2.24 #node端的ETCD可以安装，也可以不安装</span><br></pre></td></tr></table></figure>

<p>执行之前上面保留下来都token加入node： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.13.129:6443 --token bppavd.uo0spqpyn6g49fr1 --discovery-token-ca-cert-hash sha256:f526f033651e4f152d551f0950471c53401e95c0ce6b22ae63d3937dfa8fe057</span><br></pre></td></tr></table></figure>

<h4 id="节点配置环境"><a href="#节点配置环境" class="headerlink" title="节点配置环境"></a>节点配置环境</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> root用户</span></span><br><span class="line">export KUBECONFIG=/etc/kubernetes/kubelet.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 非root用户</span></span><br><span class="line">sudo cp /etc/kubernetes/kubelet.conf $HOME/ </span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/kubelet.conf </span><br><span class="line">export KUBECONFIG=$HOME/kubelet.conf</span><br></pre></td></tr></table></figure>

<p><strong>查看节点：master</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>

<h3 id="部署dashboard"><a href="#部署dashboard" class="headerlink" title="部署dashboard"></a>部署dashboard</h3><p>获取镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull guobq/dashboard: v1.8.3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改镜像tag</span></span><br><span class="line">docker tag guobq/dashboard: v1.8.3 k8s.gcr.io/kubernetes-dashboard:v1.8.3</span><br></pre></td></tr></table></figure>

<p>启动dashboard：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f kubernetes-dashboard.yaml</span><br></pre></td></tr></table></figure>

<p>kubernetes-dashboard.yaml放在：<a target="_blank" rel="noopener" href="https://github.com/guobq/k8s/blob/master/dashboard/kubernetes-dashboard.yaml">https://github.com/guobq/k8s/blob/master/dashboard/kubernetes-dashboard.yaml</a></p>
<h3 id="部署metrics-server"><a href="#部署metrics-server" class="headerlink" title="部署metrics-server"></a>部署metrics-server</h3><p>获取镜像：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker pull guobq/metrics-server :v0.3.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改镜像tag</span></span><br><span class="line">docker tag guobq/metrics-server :v0.3.1 k8s.gcr.io/metrics-server :v0.3.1</span><br></pre></td></tr></table></figure>

<p>启动metrics-server：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ./</span><br></pre></td></tr></table></figure>

<p>yaml文件放在：<a target="_blank" rel="noopener" href="https://github.com/guobq/k8s/tree/master/metrics-server">https://github.com/guobq/k8s/tree/master/metrics-server</a></p>
<h3 id="1-13-2版本所需镜像"><a href="#1-13-2版本所需镜像" class="headerlink" title="1.13.2版本所需镜像"></a>1.13.2版本所需镜像</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">k8s.gcr.io/kube-apiserver:v1.13.2</span><br><span class="line">k8s.gcr.io/kube-controller-manager:v1.13.2</span><br><span class="line">k8s.gcr.io/kube-scheduler:v1.13.2</span><br><span class="line">k8s.gcr.io/kube-proxy:v1.13.2</span><br><span class="line">k8s.gcr.io/pause:3.1</span><br><span class="line">k8s.gcr.io/etcd:3.2.24</span><br><span class="line">k8s.gcr.io/coredns:1.2.6</span><br></pre></td></tr></table></figure>





</div></div><a class="button-hover more" href="/bq/23d474b0.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/c5e34763.html">使用yum安装tomcat及基本操作</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-06-03</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E9%80%9A%E7%94%A8/">通用</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E9%80%9A%E7%94%A8/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/">服务搭建</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/tomcat/">tomcat</a></div></div><div class="post-content"><div class="main-content content"><h2 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install tomcat</span><br></pre></td></tr></table></figure>

<p> 这将安装Tomcat 7及其相关项，比如Java，它也将创建<code>tomcat</code>用户。</p>
<p>最重要的Tomcat的文件将位于<code>/usr/share/tomcat</code> 。 </p>
<p>想运行一个Tomcat应用程序，可以将它放在<code>/usr/share/tomcat/webapps</code>目录，配置Tomcat，并重新启动Tomcat服务。</p>
<p>更改Tomcat在启动时使用的Java选项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/share/tomcat/conf/tomcat.conf</span><br></pre></td></tr></table></figure>

<p>下面添加<code>JAVA_OPTS</code>行添加到文件。 改变<code>Xmx</code>和<code>MaxPermSize</code>值，这些设置会影响Tomcat会使用多少内存：</p>
<p><code>/etc/default/tomcat7–JAVA_OPTS</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTS=&quot;-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -Xmx512m -XX:MaxPermSize=256m -XX:+UseConcMarkSweepGC&quot;</span><br></pre></td></tr></table></figure>

<h2 id="安装管理包"><a href="#安装管理包" class="headerlink" title="安装管理包"></a>安装管理包</h2><p>安装默认Tomcat根页面（tomcat-webapps）和Tomcat Web应用程序管理器和Virtual Host Manager（tomcat-admin-webapps）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install tomcat-webapps tomcat-admin-webapps </span><br></pre></td></tr></table></figure>

<p>增加了<code>ROOT</code> ， <code>examples</code> ， <code>sample</code> ， <code>manager</code>和<code>host-manager</code> Web应用到<code>tomcat/webapps</code>目录。</p>
<h3 id="安装在线文档（可选）"><a href="#安装在线文档（可选）" class="headerlink" title="安装在线文档（可选）"></a>安装在线文档（可选）</h3><p>安装Tomcat文档，以便默认Tomcat页面上的所有链接都可以运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install tomcat-docs-webapp tomcat-javadoc</span><br></pre></td></tr></table></figure>

<h2 id="配置Tomcat-Web管理界面"><a href="#配置Tomcat-Web管理界面" class="headerlink" title="配置Tomcat Web管理界面"></a>配置Tomcat Web管理界面</h2><p>为了使用在上一步安装的manager webapp，我们必须添加一个登录到我们的Tomcat服务器。我们将通过编辑这样做<code>tomcat-users.xml</code>的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/share/tomcat/conf/tomcat-users.xml</span><br></pre></td></tr></table></figure>

<p>新增可访问用户<code>manager-gui</code>和<code>admin-gui</code> （前面我们安装了管理接口）。您可以通过定义类似于以下示例的用户来执行此操作。</p>
<p>tomcat-users.xml – 管理用户</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tomcat-users</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;password&quot;</span> <span class="attr">roles</span>=<span class="string">&quot;manager-gui,admin-gui&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tomcat-users</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="启动Tomcat"><a href="#启动Tomcat" class="headerlink" title="启动Tomcat"></a>启动Tomcat</h2><p>启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start tomcat</span><br></pre></td></tr></table></figure>

<p>重启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart tomcat</span><br></pre></td></tr></table></figure>

<p>自启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable tomcat</span><br></pre></td></tr></table></figure>

<h2 id="访问Web界面"><a href="#访问Web界面" class="headerlink" title="访问Web界面"></a>访问Web界面</h2><p>访问Web管理界面:<code>http://server_IP_address:8080</code></p>
<p>应用程序管理:<code>http://server_IP_address:8080/manager/html</code> </p>
<p>主机管理<code>http://server_IP_address:8080/host-manager/html/</code></p>
</div></div><a class="button-hover more" href="/bq/c5e34763.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/f84f136.html">mock&amp;stub</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-04-11</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/">Test</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/tool/">tool</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/mock/">mock</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/stub/">stub</a></div></div><div class="post-content"><div class="main-content content"><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>Stub 就是⼀个纯粹的模拟服务，⽤于替代真实的服务，收到请求返回指定结果，不会记录任何信息。<br>Mock 则更进⼀步，还会记录调⽤⾏为，可以根据⾏为来验证系统的正确性(断⾔)。<br>源于单元测试，⽬前应⽤范围单元，集成，接⼜，功能（前后端，服务间，与第三⽅间，⼦功能间）测试中</p>
<h3 id="各语言实现技术"><a href="#各语言实现技术" class="headerlink" title="各语言实现技术"></a>各语言实现技术</h3><p>Java/Android:Mockito;JMockit ,EasyMock,PowerMock<br>Python:3.3以上版本⾃带Mock,magicMock<br>Go:gomock<br>.NET:Moq<br>C++:Google Mock,MockCpp</p>
</div></div><a class="button-hover more" href="/bq/f84f136.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/729c42e3.html">jmeter安装与使用</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-04-11</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/">Test</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Test/tool/">tool</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/jmeter/">jmeter</a></div></div><div class="post-content"><div class="main-content content"><h3 id="安装运行"><a href="#安装运行" class="headerlink" title="安装运行"></a>安装运行</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>下载解压即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./jmeter-server -Djava.rmi.server.hostname=192.168.13.128 -Dserver_port=1099</span><br></pre></td></tr></table></figure>

<p>jemter支持客户端配置测试数据上传influxdb&amp;Grafana：</p>
<p>添加Backend Listener 组件InfluxdbBackendListenerClient，用于收集数据并发送给influxdb</p>
<h4 id="命令行运行"><a href="#命令行运行" class="headerlink" title="命令行运行"></a>命令行运行</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t &lt;testplan filename&gt; -l &lt;listener filename&gt;</span><br><span class="line">-h, –help -&gt; prints usage information and exit</span><br><span class="line">-n, –nongui -&gt; run JMeter in nongui mode</span><br><span class="line">-t, –testfile &lt;argument&gt; -&gt; the jmeter test(.jmx) file to run</span><br><span class="line">-l, –logfile &lt;argument&gt; -&gt; the file to log samples to</span><br><span class="line">-r, –runremote -&gt; Start remote servers (as defined in remote_hosts)</span><br><span class="line">-H, –proxyHost &lt;argument&gt; -&gt; Set a proxy server for JMeter to use</span><br><span class="line">-P, –proxyPort &lt;argument&gt; -&gt; Set proxy server port for JMeter to use</span><br></pre></td></tr></table></figure>

<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><p>执行顺序：</p>
<p>配置元件<br>前置处理器<br>定时器/逻辑控制器<br>取样-请求-samplers<br>后置处理器<br>断言<br>监听器</p>
<p>逻辑控制组件 - Loop Controller</p>
<h3 id="录制回放"><a href="#录制回放" class="headerlink" title="录制回放"></a>录制回放</h3><p>JMeter 脚本录制之前的业务步骤梳理、明确<br>创建代理HTTP(S) Test Script Recorder<br>添加Thread Group<br>添加Recorder Controller<br>代理中的配置： 端口、包含URL过滤（include）、排除URL过滤（exclude）、存放位置<br>开启JMeter代理<br>配置浏览器的代理<br>在浏览器中完成业务操作<br>JMeter 中完成录制之后检查</p>
<h3 id="自动压测"><a href="#自动压测" class="headerlink" title="自动压测"></a>自动压测</h3><p>JMeter 脚本（.jmx 文件） - 压测逻辑<br>Shell – 控制逻辑（并发数的更改）<br>JMeter 静默运行– 脱离UI限制，使得自动化运行更稳定<br>jmeter –n –t $jmx_file -l $jtl_file（jtl 文件是jmeter压测请求响应数据的原始文件）</p>
<h3 id="java-request"><a href="#java-request" class="headerlink" title="java request"></a>java request</h3><p>问题：</p>
<p>不是所有的接口都是http 协议<br>稀有协议的请求必须定制化用程序开发<br>jmx 本质上只是配置文件，不是程序代码<br>团队一起开发jmx 会很头疼，JMeter UI中处理XML冲突<br>原理及优势：<br>纯Java 程序，实现了JMeter中提供接口– “JavaSamplerClient”<br>将Java 程序集成到JMeter中，通过Java Request实现调度<br>Java 程序实现与压测“目标”的交互<br>JMeter 来控制Java程序的生命周期、并发调度、收集结果报告等处理</p>
<p>自己写程序，流程控制自由、灵活；纯代码编程，源码管理方便，容易推进团队合作开发；要Java程序可以实现的就是能够支持的</p>
<p>实现：</p>
<p>Java Request 执行类必须继承AbstractJavaSamplerClient 抽象类<br>各种Post Get Delete 请求需要使用java 的HttpClient 来实现<br>接口请求之间的交互在java 代码中来控制<br>HttpResponse 中的Json 返回值解析使用java 中的json 解析库来进行解析<br>除了最终的运行和数据交互需要进入jmeter，基本上已经俨然变成了java 程序开发活动</p>
<h3 id="jmeter中的Beanshell"><a href="#jmeter中的Beanshell" class="headerlink" title="jmeter中的Beanshell"></a>jmeter中的Beanshell</h3><p>小型嵌入式Java 源码解释器<br>BeanShell PreProcessor ：在Sampler 执行之前会被执行<br>BeanShell PostProcessor：在Sampler 执行之后会被执行<br>BeanShell Sampler: 可以直接嵌入BeanShell代码</p>
<p>BeanShell 用途：<br>帮助生成测试执行过程中的数据<br>嵌入Java 程序, 执行对应逻辑操作</p>
<p>Beanshell PreProcessor：<br>在Sampler 请求实际调用之前被执行<br>支持在BeanShell PreProcessor中直接写代码或者在Java项目中编写代码，打包导入JMeter之后再被调用<br>Demo: </p>
<p>调用Java代码： long timestamp = System.currentTimeMillis();<br>将生成的时间戳字符串放入JMeter 的全局变量中：<br>vars.put(“timestamp”, timestamp + “”);<br>后续请求通过引用${timestamp} 来使用该变量</p>
<h3 id="JMeter中的Beanshell-PostProcessor"><a href="#JMeter中的Beanshell-PostProcessor" class="headerlink" title="JMeter中的Beanshell PostProcessor"></a>JMeter中的Beanshell PostProcessor</h3><p>在Sampler 请求实际调用发生之后再被执行<br>支持在BeanShell PostProcessor中直接写代码或者在Java项目中编写代码，打包导入JMeter之后再被调用<br>Demo:</p>
<p>打包输出成jar文件，然后放入JMeter_Path/lib/ext 目录下<br>在Beanshell PostProcessor中调用封装后的Java函数<br>得到函数返回值之后，将返回值放入JMeter变量组vars<br>后续请求中可以直接使用对应的变量值</p>
<h3 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h3><p>确定JMeter 控制节点与 Agent节点的运行位置<br>控制节点与Agent节点之间的网络通信保持畅通<br>防火墙 – 关闭 或者 设定开放具体端口<br>各个节点上安装好 JMeter<br>确定各节点的IP与JMeter启动后需要占用的端口号<br>启动Agent 节点的远程监听模式<br>配置控制节点的jmeter.properties</p>
<p>启动分布式压测Agent节点（同一台机器启动多个远程压测节点时需要避开端口冲突）：<br>jmeter-server -Djava.rmi.server.hostname=<hostname or IP> -Dserver_port=<port></p>
<p>配置JMeter 控制节点，将控制节点指向各个Agent节点：<br>打开 jmeter.properties, 找到remote_hosts 配置项<br>将Agent 压测节点的对应 hostname (IP) 、端口 填入</p>
<h3 id="远程静默压测-只能看到命令行参数的变动与监控平台曲线变化"><a href="#远程静默压测-只能看到命令行参数的变动与监控平台曲线变化" class="headerlink" title="远程静默压测(只能看到命令行参数的变动与监控平台曲线变化)"></a>远程静默压测(只能看到命令行参数的变动与监控平台曲线变化)</h3><p>打开GUI运行远程压测的问题：<br>GUI不能关闭<br>控制节点不能停止运行<br>虽然控制节点可以不承担 “发压” 工作，但是控制节点也不能关机<br>结论： 压测时间持续长，尽量别用自己的工作机当控制节点</p>
<p>首先保证所有agent都已经启动,运行JMeter静默压测，不用启动GUI,支持远程分布式压测<br>jmeter -n -r -t <jmx_file> -l <jtl_log><br>看监控页面，等待结束，结果记录导入看测试报告</p>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><h4 id="swagger转换jmx"><a href="#swagger转换jmx" class="headerlink" title="swagger转换jmx"></a>swagger转换jmx</h4><p><a target="_blank" rel="noopener" href="https://github.com/Pactortester/swaggerjmx">https://github.com/Pactortester/swaggerjmx</a></p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>编码：</p>
<p>转码程序贴入Beanshell PostProcessor</p>
</div></div><a class="button-hover more" href="/bq/729c42e3.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/b582826a.html">压缩解压缩</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-05-25</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Linux/">Linux</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Linux/tool/">tool</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Linux/">Linux</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/tar/">tar</a></div></div><div class="post-content"><div class="main-content content"><h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><p>-c: 建立压缩档案<br>-x：解压<br>-t：查看内容<br>-r：向压缩归档文件末尾追加文件<br>-u：更新原压缩包中的文件</p>
<p>这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。</p>
<p>-z：有gzip属性的<br>-j：有bz2属性的<br>-Z：有compress属性的<br>-v：显示所有过程<br>-O：将文件解开到标准输出</p>
<p>下面的参数-f是必须的</p>
<p>-f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。</p>
<p># tar -cf all.tar *.jpg<br>这条命令是将所有.jpg的文件打成一个名为all.tar的包。-c是表示产生新的包，-f指定包的文件名。</p>
<p># tar -rf all.tar *.gif<br>这条命令是将所有.gif的文件增加到all.tar的包里面去。-r是表示增加文件的意思。</p>
<p># tar -uf all.tar logo.gif<br>这条命令是更新原来tar包all.tar中logo.gif文件，-u是表示更新文件的意思。</p>
<p># tar -tf all.tar<br>这条命令是列出all.tar包中所有文件，-t是列出文件的意思</p>
<p># tar -xf all.tar<br>这条命令是解出all.tar包中所有文件，-t是解开的意思</p>
<h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><p>tar -cvf jpg.tar *.jpg //将目录里所有jpg文件打包成tar.jpg </p>
<p>tar -czf jpg.tar.gz *.jpg  //将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩，生成一个gzip压缩过的包，命名为jpg.tar.gz</p>
<p> tar -cjf jpg.tar.bz2 *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用bzip2压缩，生成一个bzip2压缩过的包，命名为jpg.tar.bz2</p>
<p>tar -cZf jpg.tar.Z *.jpg  //将目录里所有jpg文件打包成jpg.tar后，并且将其用compress压缩，生成一个umcompress压缩过的包，命名为jpg.tar.Z</p>
<p>rar a jpg.rar *.jpg //rar格式的压缩，需要先下载rar for linux</p>
<p>zip jpg.zip *.jpg //zip格式的压缩，需要先下载zip for linux</p>
<h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><p>tar -xvf file.tar //解压 tar包</p>
<p>tar -xzvf file.tar.gz //解压tar.gz</p>
<p>tar -xjvf file.tar.bz2  //解压 tar.bz2</p>
<p>tar -xZvf file.tar.Z  //解压tar.Z</p>
<p>unrar e file.rar //解压rar</p>
<p>unzip file.zip //解压zip</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1、*.tar 用 tar -xvf 解压</p>
<p>2、*.gz 用 gzip -d或者gunzip 解压</p>
<p>3、*.tar.gz和*.tgz 用 tar -xzf 解压</p>
<p>4、*.bz2 用 bzip2 -d或者用bunzip2 解压</p>
<p>5、*.tar.bz2用tar -xjf 解压</p>
<p>6、*.Z 用 uncompress 解压</p>
<p>7、*.tar.Z 用tar -xZf 解压</p>
<p>8、*.rar 用 unrar e解压</p>
<p>9、*.zip 用 unzip 解压</p>
<p>解压jdk到指定文件夹：</p>
<p>tar -xzvf jdk-8u131-linux-x64.tar.gz -C /usr/local/java</p>
</div></div><a class="button-hover more" href="/bq/b582826a.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/9ac2dadd.html">数据库权限</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-06-03</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/mysql/">mysql</a></div></div><div class="post-content"><div class="main-content content"><p>grant 权限 on 数据库对象 to 用户</p>
<h3 id="普通数据用户-查询、插入、更新、删除"><a href="#普通数据用户-查询、插入、更新、删除" class="headerlink" title="普通数据用户(查询、插入、更新、删除)"></a>普通数据用户(查询、插入、更新、删除)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> common_user@’%’</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">insert</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> common_user@’%’</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">update</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> common_user@’%’</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">delete</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> common_user@<span class="string">&#x27;%&#x27;</span></span><br><span class="line"><span class="comment">--或者</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>, <span class="keyword">insert</span>, <span class="keyword">update</span>, <span class="keyword">delete</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> common_user@’%’</span><br></pre></td></tr></table></figure>

<h3 id="数据库开发人员-创建表、索引、视图、存储过程、函数等"><a href="#数据库开发人员-创建表、索引、视图、存储过程、函数等" class="headerlink" title="数据库开发人员(创建表、索引、视图、存储过程、函数等)"></a>数据库开发人员(创建表、索引、视图、存储过程、函数等)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--grant 创建、修改、删除 MySQL 数据表结构权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">alter</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">drop</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="comment">--grant 操作 MySQL 外键权限。</span></span><br><span class="line"><span class="comment">--grant 操作 MySQL 临时表权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">temporary</span> <span class="keyword">tables</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="comment">--grant 操作 MySQL 索引权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">index</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="comment">--grant 操作 MySQL 视图、查看视图源代码 权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> <span class="keyword">view</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">show</span> <span class="keyword">view</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br><span class="line"><span class="comment">--grant 操作 MySQL 存储过程、函数 权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span> routine <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’; — now, can <span class="keyword">show</span> <span class="keyword">procedure</span> <span class="keyword">status</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">alter</span> routine <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’; — now, you can <span class="keyword">drop</span> a <span class="keyword">procedure</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> developer@’<span class="number">192.168</span><span class="number">.0</span>.%’;</span><br></pre></td></tr></table></figure>

<h3 id="普通-DBA"><a href="#普通-DBA" class="headerlink" title="普通 DBA"></a>普通 DBA</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--管理某个 MySQL 数据库的权限。其中，关键字 “privileges” 可以省略。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> testdb <span class="keyword">to</span> dba@’localhost’</span><br></pre></td></tr></table></figure>

<h3 id="高级-DBA"><a href="#高级-DBA" class="headerlink" title="高级 DBA"></a>高级 DBA</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--管理 MySQL 中所有数据库的权限。</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> dba@’localhost’</span><br></pre></td></tr></table></figure>

<h3 id="MySQL-grant-权限作用层次"><a href="#MySQL-grant-权限作用层次" class="headerlink" title="MySQL grant 权限作用层次"></a>MySQL grant 权限作用层次</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--grant 作用在整个 MySQL 服务器上</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> dba@localhost; — dba 可以查询 MySQL 中所有数据库中的表。</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> dba@localhost; — dba 可以管理 MySQL 中的所有数据库</span><br><span class="line"></span><br><span class="line"><span class="comment">--grant 作用在单个数据库上</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> dba@localhost; — dba 可以查询 testdb 中的表。</span><br><span class="line"></span><br><span class="line"><span class="comment">--grant 作用在单个数据表上</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>, <span class="keyword">insert</span>, <span class="keyword">update</span>, <span class="keyword">delete</span> <span class="keyword">on</span> testdb.orders <span class="keyword">to</span> dba@localhost;</span><br><span class="line"><span class="comment">--这里在给一个用户授权多张表时，可以多次执行以上语句。例如：</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>(user_id,username) <span class="keyword">on</span> smp.users <span class="keyword">to</span> mo_user@’%’ <span class="keyword">identified</span> <span class="keyword">by</span> ‘<span class="number">123345</span>′;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> smp.mo_sms <span class="keyword">to</span> mo_user@’%’ <span class="keyword">identified</span> <span class="keyword">by</span> ‘<span class="number">123345</span>′;</span><br><span class="line"></span><br><span class="line"><span class="comment">--grant 作用在表中的列上</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>(<span class="keyword">id</span>, se, <span class="keyword">rank</span>) <span class="keyword">on</span> testdb.apache_log <span class="keyword">to</span> dba@localhost;</span><br><span class="line"></span><br><span class="line"><span class="comment">--grant 作用在存储过程、函数上</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">execute</span> <span class="keyword">on</span> <span class="keyword">procedure</span> testdb.pr_add <span class="keyword">to</span> ‘dba’@<span class="string">&#x27;localhost’</span></span><br><span class="line"><span class="string">grant execute on function testdb.fn_add to ‘dba’@&#x27;</span>localhost’</span><br></pre></td></tr></table></figure>

<h3 id="查看-MySQL-用户权限"><a href="#查看-MySQL-用户权限" class="headerlink" title="查看 MySQL 用户权限"></a>查看 MySQL 用户权限</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查看当前用户（自己）权限</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span>;</span><br><span class="line"><span class="comment">--查看其他 MySQL 用户权限</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span> <span class="keyword">for</span> zhangkh@localhost;</span><br></pre></td></tr></table></figure>

<h3 id="权限撤销"><a href="#权限撤销" class="headerlink" title="权限撤销"></a>权限撤销</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--revoke 跟 grant 的语法差不多，只需要把关键字 “to” 换成 “from” 即可</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> dba@localhost;</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">from</span> dba@localhost;</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p><strong>1. grant, revoke 用户权限后，该用户只有重新连接 MySQL 数据库，权限才能生效。</strong></p>
<p><strong>2. 如果想让授权的用户，也可以将这些权限 grant 给其他用户，需要选项 “grant option“</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> testdb.* <span class="keyword">to</span> dba@localhost <span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;</span><br><span class="line"><span class="comment">--ps:这个特性一般用不到。实际中，数据库权限最好由 DBA 来统一管理。</span></span><br></pre></td></tr></table></figure>

<p><strong><em>mysql授权表共有5个表：user、db、host、tables_priv和columns_priv。</em></strong></p>
<p><strong>user表</strong></p>
<p>user表列出可以连接服务器的用户及其口令，并且它指定他们有哪种全局（超级用户）权限。在user表启用的任何权限均是全局权限，并适用于所有数据库。例如，如果你启用了DELETE权限，在这里列出的用户可以从任何表中删除记录，所以在你这样做之前要认真考虑。</p>
<p><strong>db表</strong></p>
<p>db表列出数据库，而用户有权限访问它们。在这里指定的权限适用于一个数据库中的所有表。</p>
<p><strong>host表</strong></p>
<p>host表与db表结合使用在一个较好层次上控制特定主机对数据库的访问权限，这可能比单独使用db好些。这个表不受GRANT和REVOKE语句的影响，所以，你可能发觉你根本不是用它。</p>
<p><strong>tables_priv表</strong></p>
<p>tables_priv表指定表级权限，在这里指定的一个权限适用于一个表的所有列。</p>
<p><strong>columns_priv表</strong></p>
<p>columns_priv表指定列级权限。这里指定的权限适用于一个表的特定列。</p>
<p>注：</p>
<p>对于GRANT USAGE ON，查看手册有如下介绍和实例：</p>
<p>mysql&gt; GRANT USAGE ON <em>.</em> TO ‘zhangkh’@’localhost’;</p>
<p>一个账户有用户名zhangkh，没有密码。该账户只用于从本机连接。未授予权限。通过GRANT语句中的USAGE权限，你可以创建账户而不授予任何权限。它可以将所有全局权限设为’N’。假定你将在以后将具体权限授予该账户。</p>
</div></div><a class="button-hover more" href="/bq/9ac2dadd.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/4237417d.html">mysql安装及使用</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-06-03</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/mysql/">mysql</a></div></div><div class="post-content"><div class="main-content content"><h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql -v ~/docker/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d -p 13306:3306 mysql:5.7</span><br><span class="line"></span><br><span class="line">docker exec -it mysql bash</span><br><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>

<h5 id="添加用户与赋权"><a href="#添加用户与赋权" class="headerlink" title="添加用户与赋权"></a>添加用户与赋权</h5><p>创建用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line"><span class="comment">--username – 你将创建的用户名说明:</span></span><br><span class="line"><span class="comment">--host – 指定该用户在哪个主机上可以登陆,如果是本地用户可用localhost,  如 果想让该用户可以从任意远程主机登陆,可以使用通配符%</span></span><br><span class="line"><span class="comment">--password –  该用户的登陆密码,密码可以为空,如果为空则该用户可以不需要密码登 陆服务</span></span><br></pre></td></tr></table></figure>
<p>授权</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">privileges</span> <span class="keyword">ON</span> databasename.tablename <span class="keyword">TO</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span>;</span><br><span class="line"><span class="comment">--privileges – 用户的操作权限,如SELECT , INSERT , UPDATE  等(详细列表见该文最后面).如果要授予所有的权限则使用ALL说明: </span></span><br><span class="line"><span class="comment">--databasename –  数据库名</span></span><br><span class="line"><span class="comment">--tablename-表名,如果要授予该用户对所有数据库和表的相应操作权限则可用* 表示, 如*.*</span></span><br></pre></td></tr></table></figure>
<p>设置与更改用户密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span> = <span class="keyword">PASSWORD</span>(<span class="string">&#x27;newpassword&#x27;</span>);</span><br><span class="line"><span class="comment">--如果是当前登陆用户用</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">&quot;newpassword&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>撤销用户权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> privilege <span class="keyword">ON</span> databasename.tablename <span class="keyword">FROM</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>删除用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> ‘username’@<span class="string">&#x27;host’;</span></span><br></pre></td></tr></table></figure>
<p>权限刷新</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure>
<p>example:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进⼊mysql</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> use mysql;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> update user <span class="built_in">set</span> authentication_string = password(<span class="string">&#x27;123456&#x27;</span>) <span class="built_in">where</span> user =</span></span><br><span class="line">‘root’; #修改root密码</span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;root&#x27;</span></span></span><br><span class="line">WITH GRANT OPTION; #添加权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加用户</span></span><br><span class="line">create user test identified by &#x27;test&#x27;;</span><br><span class="line">create database  testdb;</span><br><span class="line">grant all privileges on testdb.* to test@&#x27;%&#x27; identified by &#x27;test&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">select user,host from mysql.user;</span><br><span class="line">show grants for test;</span><br><span class="line">show variables like &#x27;validate_password%&#x27;;</span><br></pre></td></tr></table></figure>

<h5 id="权限说明"><a href="#权限说明" class="headerlink" title="权限说明"></a>权限说明</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ALTER : Allows use of ALTER TABLE. </span><br><span class="line">ALTER ROUTINE : Alters or drops stored routines. </span><br><span class="line">CREATE : Allows use of CREATE TABLE. </span><br><span class="line">CREATE ROUTINE : Creates stored routines. </span><br><span class="line">CREATE TEMPORARY TABLE : Allows use of CREATE TEMPORARY TABLE. </span><br><span class="line">CREATE USER : Allows use of CREATE USER, DROP USER, RENAME USER, and REVOKE ALL PRIVILEGES. </span><br><span class="line">CREATE VIEW : Allows use of CREATE VIEW. </span><br><span class="line">DELETE : Allows use of DELETE. </span><br><span class="line">DROP : Allows use of DROP TABLE. </span><br><span class="line">EXECUTE : Allows the user to run stored routines. </span><br><span class="line">FILE : Allows use of SELECT… INTO OUTFILE and LOAD DATA INFILE. </span><br><span class="line">INDEX : Allows use of CREATE INDEX and DROP INDEX. </span><br><span class="line">INSERT : Allows use of INSERT. </span><br><span class="line">LOCK TABLES : Allows use of LOCK TABLES on tables for which the user also has SELECT privileges. </span><br><span class="line">PROCESS : Allows use of SHOW FULL PROCESSLIST. </span><br><span class="line">RELOAD : Allows use of FLUSH. </span><br><span class="line">REPLICATION : Allows the user to ask where slave or master </span><br><span class="line">CLIENT : servers are. </span><br><span class="line">REPLICATION SLAVE : Needed for replication slaves. </span><br><span class="line">SELECT : Allows use of SELECT. </span><br><span class="line">SHOW DATABASES : Allows use of SHOW DATABASES. </span><br><span class="line">SHOW VIEW : Allows use of SHOW CREATE VIEW. </span><br><span class="line">SHUTDOWN : Allows use of mysqladmin shutdown. </span><br><span class="line">SUPER : Allows use of CHANGE MASTER, KILL, PURGE MASTER LOGS, and SET GLOBAL SQL statements. Allows mysqladmin debug command. Allows one extra connection to be made if maximum connections are reached. </span><br><span class="line">UPDATE : Allows use of UPDATE. </span><br><span class="line">USAGE : Allows connection without any specific privileges.</span><br></pre></td></tr></table></figure>

<h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4><ol>
<li>数值数据类型<br>整数类型： TINYINT、SMALLINT、MEDIUMINT、INT、<br>BIGINT<br>浮点数类型：FLOAT、DOUBLE<br>定点⼩数： DECIMAL</li>
<li>⽇期/时间类型<br>YEAR、TIME、DATE、DATETIME、TIMESTAMP</li>
<li>字符串类型，其中字符串又可以分为⽂本字符串和⼆进制字符串<br>⽂本字符串：<br>CHAR、VARCHAR、TEXT、ENUM、SET等　<br>⼆进制字符串<br>BIT、BINARY、VARBINARY、BLOB</li>
</ol>
<h4 id="DDl"><a href="#DDl" class="headerlink" title="DDl"></a>DDl</h4><p>定义数据库对象：库、表、列列（Create，Drop，Alter，Show，Rename）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;users&#96; (</span><br><span class="line">&#96;empno&#96; int(10) NOT NULL,</span><br><span class="line">&#96;name&#96; varchar(50) NOT NULL,</span><br><span class="line">&#96;birth&#96; date DEFAULT NULL,</span><br><span class="line">&#96;sex&#96; char(1) DEFAULT NULL,</span><br><span class="line">&#96;salary&#96; decimal(8,2) DEFAULT NULL,</span><br><span class="line">&#96;regtime&#96; datetime DEFAULT</span><br><span class="line">CURRENT_TIMESTAMP,</span><br><span class="line">PRIMARY KEY (&#96;empno&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT</span><br><span class="line">CHARSET&#x3D;utf8;</span><br><span class="line"># 修改表字段类型</span><br><span class="line">ALTER TABLE users MODIFY age date ;</span><br><span class="line"># 修改字段名和类型</span><br><span class="line">ALTER TABLE users change age birthday date ;</span><br><span class="line">SHOW TABLES;</span><br><span class="line"># 重命名表</span><br><span class="line">RENAME TABLE users TO pay_users;</span><br><span class="line"># 删除表</span><br><span class="line">DROP TABLE IF EXISTS users;</span><br><span class="line"># 删除所有信息</span><br><span class="line">TRUNCATE users;</span><br></pre></td></tr></table></figure>

<h4 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h4><p>数据操作，增、删、改、查数据库记录(insert,delete,update)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 插⼊单条数据</span><br><span class="line">INSERT INTO tbl_name (col1,col2) VALUES (value1,value2);</span><br><span class="line"># 删除数据</span><br><span class="line">DELETE FROM tbl_name;</span><br><span class="line"># 更新数据</span><br><span class="line">update users1 set birth &#x3D;&#39;1989-01-31&#39; where name&#x3D;‘fang&#39;</span><br></pre></td></tr></table></figure>

<h4 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h4><p>1.选择所有数据<br>2.选择特定⾏<br>3.选择特定列<br>4.排序⾏<br>5.模糊查询<br>6.⽇期函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.精确查询：&#x3D; &lt;&gt;</span><br><span class="line">2.别名：as</span><br><span class="line">3.限制⾏：limit m,n</span><br><span class="line">4.⽐较运算符：&gt;,&gt;&#x3D;,&lt;,&lt;&#x3D;</span><br><span class="line">5.逻辑运算符：and 两条件同时满⾜，or⼀个条件满⾜就⾏ and优先级⾼于or</span><br><span class="line">6.去重 distinct</span><br><span class="line">7.区间运算</span><br><span class="line">8.排序 order by desc降序，asc 升序</span><br><span class="line">9.模糊查询：like % _ notlike</span><br><span class="line">10.集合运算 in , not in</span><br><span class="line">11.⾮空运算 is null,is not null</span><br></pre></td></tr></table></figure>

<h5 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h5><p>count,sum，avg,max,min</p>
<h5 id="分组筛选"><a href="#分组筛选" class="headerlink" title="分组筛选"></a>分组筛选</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT &lt;列列名&gt;</span><br><span class="line">FROM &lt;表名&gt;</span><br><span class="line">[WHERE &lt;查询表达式&gt;]</span><br><span class="line">[GROUP BY &lt;分组列列名&gt;]</span><br><span class="line">[HAVING &lt;分组后的查询表达式&gt;]</span><br></pre></td></tr></table></figure>

<p>WHERE⼦子句句从数据源中去掉不不符合其搜索条件的数据<br>GROUP BY⼦子句句搜集数据⾏行行到各个组中，统计函数为各个组计算统计值<br>HAVING⼦子句句去掉不不符合其组搜索条件的各组数据⾏</p>
<h4 id="多表联接"><a href="#多表联接" class="headerlink" title="多表联接"></a>多表联接</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># WHERE（等值连接）</span><br><span class="line">select 列名 from 表A a ,表B b where a.key&#x3D;b.key</span><br><span class="line"># 内联接(INNER JOIN)</span><br><span class="line">select 列列名 from 表A a inner join 表B b on a.key&#x3D;b.key</span><br><span class="line"># 外联接(OUTER JOIN)</span><br><span class="line"># 左外联接： </span><br><span class="line">select 列名 from 表A a left join 表B b on a.key&#x3D;b.key</span><br><span class="line"># 右外联接：</span><br><span class="line">select 列名 from 表A a right join 表B b on a.key&#x3D;b.key</span><br><span class="line"># CROSS JOIN(笛卡尔积):</span><br><span class="line">SELECT t1.id, t2.id FROM t1 CROSS JOIN t2;</span><br><span class="line"># Union :</span><br><span class="line">SELECT * FROM t1 union select * from t2;</span><br></pre></td></tr></table></figure>

<h4 id="备份恢复"><a href="#备份恢复" class="headerlink" title="备份恢复"></a>备份恢复</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -help</span><br><span class="line"># 备份：</span><br><span class="line">mysqldump -u ⽤户名 -p --databases db &gt; 备份⽂件名.sql</span><br><span class="line"># 恢复：</span><br><span class="line">通过mysqldump备份的⽂件，如果⽤了--all-databases或--databases选项，则在备份⽂件中包含 CREATE DATABASE和 USE语句，不需要指定⼀个数据库名去恢复备份⽂件。</span><br><span class="line">shell&gt; mysql –u ⽤户名 –p &lt; 备份⽂件.sql</span><br><span class="line">mysql&gt; source备份⽂件.sql;</span><br><span class="line">如果通过mysqldump备份的是单个数据库，且没有使⽤--databases选项，则备份⽂件中不包含 CREATE DATABASE和 USE语句，那么在恢复的时候必须先创建数据库。</span><br></pre></td></tr></table></figure>

<h4 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 删除存储过程，如果这个名字的已存在</span><br><span class="line">DROP PROCEDURE if exists insert_data_pro;</span><br><span class="line"># 由于语句较多，使⽤这个告诉mysql，看看$$就表⽰语句结束了。</span><br><span class="line">DELIMITER $$</span><br><span class="line"># 建⽴存储过程名字叫 insert_data_pro</span><br><span class="line">CREATE</span><br><span class="line">PROCEDURE insert_data_pro()</span><br><span class="line">BEGIN # 开始</span><br><span class="line">DECLARE i INT; #定义 i</span><br><span class="line">SET i&#x3D;0; # 设置初始值为0</span><br><span class="line">WHILE i&gt;&#x3D;0 &amp;&amp; i&lt;&#x3D; 10000 DO # 循环 插⼊10000条数据，可以变化。</span><br><span class="line">INSERT INTO</span><br><span class="line">big_data(name1,age,email)values(concat(‘bq’,i),rand()*50,concat(&#39;bq&#39;,i,&#39;@qq.com&#39;));</span><br><span class="line"># 写的sql，concat是将多个str连在⼀起。</span><br><span class="line">SET i&#x3D;i + 1;</span><br><span class="line">END WHILE; #结束循环</span><br><span class="line">END$$ #存储过程结束</span><br><span class="line">DELIMITER ; #恢复设置</span><br><span class="line"># 下⾯是调⽤存储过程</span><br><span class="line">call insert_data_pro();</span><br></pre></td></tr></table></figure>

<h4 id="索引，慢查询"><a href="#索引，慢查询" class="headerlink" title="索引，慢查询"></a>索引，慢查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX index_name ON big_data(name);</span><br><span class="line">explain + 查询SQL - ⽤于显⽰SQL执⾏信息参数</span><br><span class="line"># MySQL Explain详解 https:&#x2F;&#x2F;www.cnblogs.com&#x2F;tufujie&#x2F;p&#x2F;9413852.html</span><br></pre></td></tr></table></figure>

<h4 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">show ENGINES;</span><br><span class="line"># InnoDB：MySQL 5.7中的默认存储引擎。 InnoDB是⼀种适⽤于MySQL的事务安全（ACID兼容）存储引擎，具有提交，回滚和崩溃恢复功能，可保护⽤户数据。 InnoDB⾏级锁定（没有升级到更粗略的粒度锁）和Oracle风格的⼀致⾮锁定读取增加了多⽤户并发性和性能。InnoDB将⽤户数据存储在聚簇索引中，以减少基于主键的常见查询的I &#x2F; O. 为了保持数据完整性， InnoDB还⽀持FOREIGN KEY参照完整性约束。</span><br><span class="line"># MyISAM：这些表占⽤空间⼩。 表级锁定 限制了读&#x2F;写⼯作负载的性能，因此它通常⽤于Web和数据仓库配置中的只读或⼤部分读取⼯作负载。</span><br><span class="line"># Memory：将所有数据存储在RAM中，以便在需要快速查找⾮关键数据的环境中快速访问。这台发动机以前被称为HEAP发动机。它的⽤例正在减少; InnoDB其缓冲池存储区提供了⼀种通⽤且持久的⽅式来将⼤部分或全部数据保存在内存中，并 NDBCLUSTER为⼤型分布式数据集提供快速键值查找。</span><br><span class="line"># CSV：它的表实际上是以逗号分隔值的⽂本⽂件。CSV表允许您以CSV格式导⼊或转储数据，以便与读取和写⼊相同格式的脚本和应⽤程序交换数据。由于CSV表未编制索引，因此通常InnoDB在正常操作期间将数据保留在表中，并且仅在导⼊或导出阶段使⽤CSV表。</span><br><span class="line"># Archive：这些紧凑的⽆索引表⽤于存储和检索⼤量很少引⽤的历史，存档或安全审计信息。</span><br><span class="line"># Blackhole：Blackhole存储引擎接受但不存储数据</span><br><span class="line"># NDB（也称为 NDBCLUSTER） - 该集群数据库引擎特别适⽤于需要尽可能⾼的正常运⾏时间和可⽤性的应⽤程序</span><br><span class="line"># Merge：适⽤于数据仓库等VLDB环境。</span><br><span class="line"># Federated：提供链接单独的MySQL服务器以从许多物理服务器创建⼀个逻辑数据库的功能。⾮常适合分布式或数据集市环境。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees </span><br><span class="line">LIMIT 100;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees </span><br><span class="line">WHERE last_name&#x3D;&#39;Facello&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees </span><br><span class="line">WHERE last_name&lt;&gt;&#39;Facello&#39; and emp_no&lt;10020;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE hire_date&gt;&#39;2000-01-01&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees t </span><br><span class="line">WHERE t.gender&#x3D;&#39;M&#39; AND t.last_name&#x3D;&#39;Pettey&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM employees t </span><br><span class="line">WHERE t.gender&#x3D;&#39;M&#39; AND t.last_name&#x3D;&#39;Pettey&#39; or t.gender&#x3D;&#39;M&#39; AND t.last_name&#x3D;&#39;Hutton&#39;;</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT (last_name) </span><br><span class="line">FROM employees t </span><br><span class="line">ORDER BY t.last_name DESC; </span><br><span class="line"></span><br><span class="line">SELECT last_name,hire_date </span><br><span class="line">FROM employees </span><br><span class="line">WHERE hire_date&gt;&#x3D;&#39;2000&#39; </span><br><span class="line">ORDER BY hire_date DESC ,last_name ASC;</span><br><span class="line"></span><br><span class="line">SELECT last_name,hire_date </span><br><span class="line">FROM employees </span><br><span class="line">WHERE last_name NOT IN (&#39;Facello&#39;,&#39;Hutton&#39;);</span><br><span class="line"></span><br><span class="line">SELECT last_name,hire_date </span><br><span class="line">FROM employees </span><br><span class="line">WHERE last_name IN (&#39;Facello&#39;,&#39;Hutton&#39;);</span><br><span class="line"></span><br><span class="line">SELECT last_name,hire_date </span><br><span class="line">FROM employees </span><br><span class="line">WHERE hire_date is NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT EXTRACT(YEAR FROM CURDATE());</span><br><span class="line"></span><br><span class="line">SELECT last_name,EXTRACT(YEAR FROM CURDATE()),EXTRACT(YEAR FROM hire_date) </span><br><span class="line">FROM employees </span><br><span class="line">WHERE EXTRACT(YEAR FROM CURDATE())-EXTRACT(YEAR FROM hire_date)&gt;20;</span><br><span class="line"></span><br><span class="line">SELECT last_name,hire_date </span><br><span class="line">FROM employees </span><br><span class="line">WHERE hire_date&lt;DATE_SUB(CURDATE(),INTERVAL 20 YEAR);</span><br><span class="line"></span><br><span class="line">SELECT DISTINCT(emp_no) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE salary BETWEEN 20000 AND 50000;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees</span><br><span class="line">WHERE first_name LIKE &#39;b%&#39;;</span><br><span class="line"> </span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name REGEXP &#39;^b&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name LIKE &#39;%nd&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name REGEXP &#39;nd$&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name LIKE &#39;%we%&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name REGEXP &#39;we&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name LIKE &#39;_____&#39;;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE LENGTH(first_name)&#x3D;5;</span><br><span class="line"></span><br><span class="line">SELECT last_name 姓,first_name 名 </span><br><span class="line">FROM employees </span><br><span class="line">WHERE first_name REGEXP &#39;^.....$&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT COUNT(salary) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE emp_no&#x3D;10001;</span><br><span class="line"></span><br><span class="line">SELECT SUM(salary) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE emp_no&#x3D;10001;</span><br><span class="line"></span><br><span class="line">SELECT MAX(salary) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE emp_no&#x3D;10001;</span><br><span class="line"></span><br><span class="line">SELECT MIN(salary) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE emp_no&#x3D;10001;</span><br><span class="line"></span><br><span class="line">SELECT ROUND(AVG(salary),2) </span><br><span class="line">FROM salaries </span><br><span class="line">WHERE emp_no&#x3D;10001;</span><br><span class="line"></span><br><span class="line">SELECT MAX(hire_date),gender </span><br><span class="line">FROM employees </span><br><span class="line">GROUP BY gender;</span><br><span class="line"></span><br><span class="line">SELECT emp_no,AVG(salary) 平均薪资,MAX(salary) 最高薪资,MIN(salary) 最低薪资 </span><br><span class="line">FROM salaries </span><br><span class="line">GROUP BY emp_no;</span><br><span class="line"></span><br><span class="line">SELECT emp_no </span><br><span class="line">FROM dept_emp </span><br><span class="line">GROUP BY emp_no </span><br><span class="line">HAVING COUNT(emp_no)&gt;1;</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees </span><br><span class="line">WHERE emp_no in(</span><br><span class="line">SELECT emp_no FROM dept_emp </span><br><span class="line">GROUP BY emp_no </span><br><span class="line">HAVING COUNT(emp_no)&gt;1);</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees </span><br><span class="line">WHERE emp_no&#x3D;(</span><br><span class="line">SELECT emp_no FROM salaries </span><br><span class="line">WHERE to_date&#x3D;&#39;9999-01-01&#39; </span><br><span class="line">ORDER BY salary DESC LIMIT 1);</span><br><span class="line"></span><br><span class="line">SELECT * FROM salaries </span><br><span class="line">WHERE emp_no in(</span><br><span class="line">SELECT emp_no FROM salaries </span><br><span class="line">GROUP BY emp_no HAVING COUNT(emp_no)&gt;&#x3D;18);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT a.emp_no,a.first_name,b.dept_no </span><br><span class="line">FROM employees a,dept_emp b </span><br><span class="line">WHERE a.emp_no&#x3D;b.emp_no;</span><br><span class="line"></span><br><span class="line">SELECT a.emp_no,a.first_name,b.dept_no,c.dept_name </span><br><span class="line">FROM employees a,dept_emp b,departments c </span><br><span class="line">WHERE a.emp_no&#x3D;b.emp_no AND b.dept_no&#x3D;c.dept_no;</span><br><span class="line"></span><br><span class="line">SELECT a.emp_no,a.first_name </span><br><span class="line">FROM employees a </span><br><span class="line">INNER JOIN dept_emp b ON a.emp_no&#x3D;b.emp_no </span><br><span class="line">INNER JOIN departments c ON b.dept_no&#x3D;c.dept_no </span><br><span class="line">WHERE c.dept_name&#x3D;&#39;Customer Service&#39;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(a.emp_no)</span><br><span class="line">FROM employees a </span><br><span class="line">LEFT JOIN dept_emp b ON a.emp_no&#x3D;b.emp_no </span><br><span class="line">LEFT JOIN departments c ON b.dept_no&#x3D;c.dept_no </span><br><span class="line">WHERE c.dept_name&#x3D;&#39;Customer Service&#39;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(a.emp_no) </span><br><span class="line">FROM employees a </span><br><span class="line">RIGHT JOIN dept_emp b ON a.emp_no&#x3D;b.emp_no </span><br><span class="line">RIGHT JOIN departments c ON b.dept_no&#x3D;c.dept_no </span><br><span class="line">WHERE c.dept_name&#x3D;&#39;Customer Service&#39;</span><br><span class="line"></span><br><span class="line">SELECT * </span><br><span class="line">FROM departments UNION ALL</span><br><span class="line">SELECT * FROM departments ORDER BY dept_no;</span><br><span class="line"></span><br><span class="line">SELECT emp_no,MD5(salary) 薪水保密</span><br><span class="line">FROM salaries WHERE to_date&#x3D;&#39;9999-01-01&#39;</span><br><span class="line">ORDER BY salary ASC LIMIT 10;</span><br><span class="line"></span><br><span class="line">SELECT emp_no,MD5(salary) 薪水保密</span><br><span class="line">FROM salaries WHERE to_date&#x3D;&#39;9999-01-01&#39;</span><br><span class="line">ORDER BY salary ASC LIMIT 10;</span><br><span class="line"></span><br><span class="line">SELECT emp_no,MD5(salary) 薪水保密</span><br><span class="line">FROM salaries WHERE to_date&gt;CURDATE()</span><br><span class="line">ORDER BY salary  LIMIT 10;</span><br><span class="line"></span><br><span class="line">UPDATE salaries SET salary&#x3D;salary+3000 </span><br><span class="line">WHERE emp_no IN(</span><br><span class="line">SELECT DISTINCT(emp_no) FROM dept_emp</span><br><span class="line">WHERE EXTRACT(YEAR FROM from_date)&#x3D;2002</span><br><span class="line">AND to_date&gt;CURDATE()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE TABLE &#96;testdata&#96;(</span><br><span class="line">&#96;id&#96; int(10) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">&#96;payload&#96; json DEFAULT NULL,</span><br><span class="line">&#96;response&#96; json DEFAULT NULL,</span><br><span class="line">PRIMARY KEY(&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line">DESC testdata;</span><br><span class="line"></span><br><span class="line">INSERT INTO testdata (payload,response)</span><br><span class="line">VALUES(&#39;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;test&quot;&#125;&#39;,&#39;&#123;&quot;code&quot;:40000,&quot;msg&quot;:&quot;ok&quot;&#125;&#39;);</span><br><span class="line"></span><br><span class="line">INSERT INTO testdata (payload,response)</span><br><span class="line">VALUES(JSON_OBJECT(&quot;id&quot;,3,&quot;name&quot;,&quot;dev1&quot;),</span><br><span class="line">JSON_ARRAY(1,3,5));</span><br><span class="line"></span><br><span class="line">SELECT id,payload-&gt;&#39;$.id&#39;,payload-&gt;&#39;$.name&#39;,response-&gt;&#39;$[0]&#39;,response-&gt;&#39;$[2]&#39; FROM testdata;</span><br><span class="line"></span><br><span class="line">SELECT * FROM testdata WHERE payload-&gt;&#39;$.name&#39;&#x3D;&#39;test&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">存储过程</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS big_data;</span><br><span class="line"></span><br><span class="line">CREATE TABLE big_data(</span><br><span class="line">id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,</span><br><span class="line">name1 VARCHAR(16) DEFAULT NULL,</span><br><span class="line">age INT(11),</span><br><span class="line">email VARCHAR(64) DEFAULT NULL</span><br><span class="line">)ENGINE&#x3D;MYISAM DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">DROP PROCEDURE if exists insert_data_pro;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE</span><br><span class="line">PROCEDURE insert_data_pro()</span><br><span class="line">BEGIN </span><br><span class="line">DECLARE i INT; </span><br><span class="line">SET i&#x3D;0; </span><br><span class="line">WHILE i&gt;&#x3D;0 &amp;&amp; i&lt;&#x3D; 10000 DO </span><br><span class="line">INSERT INTO</span><br><span class="line">big_data(name1,age,email)values(concat(&#39;test&#39;,i),rand()*50,concat(&#39;test&#39;,i,&#39;@qq.com&#39;));</span><br><span class="line">SET i&#x3D;i + 1;</span><br><span class="line">END WHILE; </span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">call insert_data_pro();</span><br><span class="line"></span><br><span class="line">ALTER TABLE big_data ENGINE&#x3D;INNODB;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</div></div><a class="button-hover more" href="/bq/4237417d.html#more">阅读全文</a></div><div class="recent-post-item"><i class="article-top"></i><a class="post-title" href="/bq/811c2840.html">Spring Boot 打包</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2021-06-03</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/%E5%B7%A5%E5%85%B7/%E6%89%93%E5%8C%85%E6%9E%84%E5%BB%BA/">打包构建</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Spring-Boot/">Spring Boot</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Spring-Boot-打包"><a href="#Spring-Boot-打包" class="headerlink" title="Spring Boot 打包"></a>Spring Boot 打包</h2><h3 id="war包"><a href="#war包" class="headerlink" title="war包"></a>war包</h3><p>SpringBoot写的项目，自身嵌入了tomcat，所以可以直接运行jar包。但是，每次启动jar包创建的都是新的tomcat，这回造成上传文件丢失等问题。因此，我们需要将项目打成war包，部署到tomcat上。</p>
<p>1.修改pom.xml中的jar为war</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.bookcycle.panda<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>panda-payservice<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>1234</span><br></pre></td></tr></table></figure>

<p>修改为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.bookcycle.panda<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>panda-payservice<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>1234</span><br></pre></td></tr></table></figure>

<p>2.在pom.xml中添加打war包的maven插件和设置打包的时候跳过单元测试代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--如果想在没有web.xml文件的情况下构建WAR，请设置为false--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">failOnMissingWebXml</span>&gt;</span>false<span class="tag">&lt;/<span class="name">failOnMissingWebXml</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--设置war包的名字--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">warName</span>&gt;</span>checkroom<span class="tag">&lt;/<span class="name">warName</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- 让打包的时候跳过测试代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>  123456789101112131415161718</span><br></pre></td></tr></table></figure>

<p>3.在pom.xml中添加servlet包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>1234</span><br></pre></td></tr></table></figure>

<p>4.排除Spring Boot内置的tomcat</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>1234</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>12345678910</span><br></pre></td></tr></table></figure>

<p>5.在main方法所属的类的同级包下，新建SpringBootStartApplication类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootStartApplication</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 注意的Application是启动类，就是main方法所属的类</span></span><br><span class="line">        <span class="keyword">return</span> builder.sources(Application.class);</span><br><span class="line">    &#125;<span class="number">1234567</span></span><br></pre></td></tr></table></figure>

<p>6.打war包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package</span><br></pre></td></tr></table></figure>

<p>7.访问项目</p>
<p>产品路径:项目文件夹target/***.war</p>
<p>将war包拷贝到Tomcat的webapps下，然后启动Tomcat</p>
<p>访问路径是：<a target="_blank" rel="noopener" href="http://localhost/">http://localhost</a>:端口号/war包名/@RequestMapping中的value值</p>
<p><strong>注意：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 端口号是Tomcat的端口号，不是Spring Boot中配置的项目端口号</span><br><span class="line">- 如果打包过程中遇到</span><br><span class="line">  [WARNING] The requested profile “pom.xml” could not be activated because it does not exist.</span><br><span class="line">  可以在打包的时候，清空Goals栏下面的Profiles栏的内容</span><br></pre></td></tr></table></figure>

<h3 id="jar包"><a href="#jar包" class="headerlink" title="jar包"></a>jar包</h3><p>1、修改项目发布形式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、配置加载第三方jar包的目录</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-compiler-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">compilerArguments</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">extdirs</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources/lib<span class="tag">&lt;/<span class="name">extdirs</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">compilerArguments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、指定第三方jar包的打包路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 主要配置：将引用的第三方 jar 包打进生成的 jar 文件的 BOOT-INF/lib 目录中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src\main\resources\lib<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span>BOOT-INF\lib<span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--  &lt;includes&gt;</span></span><br><span class="line"><span class="comment">            &lt;include&gt;**/*.jar&lt;/include&gt;</span></span><br><span class="line"><span class="comment">        &lt;/includes&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4、执行mvn clean package命令即可生成相应jar包</p>
</div></div><a class="button-hover more" href="/bq/811c2840.html#more">阅读全文</a></div></div><div id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/">&lt;i class&#x3D;&quot;fas fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/7/">&lt;i class&#x3D;&quot;fas fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i></span><span id="busuanzi_value_site_uv"></span><span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i></span><span id="busuanzi_value_site_pv"></span><span></span></div><div class="copyright">&copy;2020 ～ 2021 By bq</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>