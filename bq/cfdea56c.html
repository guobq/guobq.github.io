<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="python基础"><meta name="keywords" content="python"><meta name="author" content="bq,undefined"><meta name="copyright" content="bq"><title>python基础【bq's notes】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!-- link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!-- link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!-- script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"8ICB0LL54F","apiKey":"b6e01221a0e1bdb34d69e088b9bd39d8","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  gitment: {},
  valine: {"appId":"8xUuEcUoXahLwm69LVK1eumF-gzGzoHsz","appKey":"NDF5dcJsxuEHHBOLlda7Y07b"},
}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="bq's notes" type="application/atom+xml">
</head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E5%85%B1%E5%AD%98"><span class="toc-number">1.</span> <span class="toc-text">版本共存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%B7%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">手工配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pyenv"><span class="toc-number">1.2.</span> <span class="toc-text">Pyenv</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#linux"><span class="toc-number">1.2.1.</span> <span class="toc-text">linux</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#windows"><span class="toc-number">1.2.2.</span> <span class="toc-text">windows</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-number">2.1.</span> <span class="toc-text">镜像源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">2.2.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC"><span class="toc-number">2.3.</span> <span class="toc-text">安装指定版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-number">2.4.</span> <span class="toc-text">问题解决</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">3.</span> <span class="toc-text">虚拟环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">4.</span> <span class="toc-text">命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%BA%93"><span class="toc-number">5.</span> <span class="toc-text">常用类库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#str"><span class="toc-number">5.1.</span> <span class="toc-text">str</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#os"><span class="toc-number">5.2.</span> <span class="toc-text">os</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Error"><span class="toc-number">5.3.</span> <span class="toc-text">Error</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">连接数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#python%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.1.</span> <span class="toc-text">python连接数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E5%92%8C%E4%BF%A1%E6%81%AF"><span class="toc-number">6.2.</span> <span class="toc-text">获取表的字段名和信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Emysql%E6%95%B0%E6%8D%AE%E5%BA%93%E9%93%B6%E8%A1%8C%E8%BD%AC%E8%B4%A6%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.3.</span> <span class="toc-text">基于mysql数据库银行转账功能实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#execl%E4%B8%8Exmind"><span class="toc-number">7.</span> <span class="toc-text">execl与xmind</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">7.1.</span> <span class="toc-text">问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text">装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E6%93%8D%E4%BD%9Clinux"><span class="toc-number">9.</span> <span class="toc-text">远程操作linux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json%E6%AF%94%E8%BE%83"><span class="toc-number">10.</span> <span class="toc-text">json比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python2exe"><span class="toc-number">11.</span> <span class="toc-text">python2exe</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">11.1.</span> <span class="toc-text">环境准备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E5%BB%BAexe%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6"><span class="toc-number">11.2.</span> <span class="toc-text">构建exe执行文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">11.3.</span> <span class="toc-text">参考</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">bq</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/guobq" target="_blank">GitHub<i class="icon-dot bg-color3"></i></a><a class="links-button button-hover" href="mailto:2278220079@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color7"></i></a><a class="links-button button-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2278220079&amp;site=qq&amp;menu=yes" target="_blank">QQ<i class="icon-dot bg-color2"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">77</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">78</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">25</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">bq's notes</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">python基础</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2017-04-25 | 更新于 2021-09-18</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Language/">Language</a><i class="fa fa-angle-right" style="margin: 0 8px;"></i><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/Language/python/">python</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/python/">python</a></div></div></div><div class="main-content"><h3 id="版本共存"><a href="#版本共存" class="headerlink" title="版本共存"></a>版本共存</h3><h4 id="手工配置"><a href="#手工配置" class="headerlink" title="手工配置"></a>手工配置</h4><p>在安装Python3（&gt;=3.3）时，Python的安装包实际上在系统中安装了一个启动器py.exe，默认放置在文件夹C:\Windows\下面。这个启动器允许我们指定使用Python2还是Python3来运行代码（当然前提是你已经成功安装了Python2和Python3）。<br>运行代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">py -2 hello.py    #python2</span><br><span class="line">py -3 hello.py    #python3</span><br></pre></td></tr></table></figure>

<p>如果你觉得参数 -2/-3 麻烦，由于 py.exe 这个启动器允许你在代码里面加入说明，指示这个文件是用python2还是3版本运行，可以在代码文件最前面加入一行说明<br>python2版本（编码说明可以放在第二行）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!python2</span></span><br><span class="line"><span class="comment">#coding:gbk12</span></span><br></pre></td></tr></table></figure>

<p>python3版本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!python3</span></span><br></pre></td></tr></table></figure>

<p>这样就可以直接运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py hello.py  #将自动转入相应版本1</span><br></pre></td></tr></table></figure>

<p>当2和3同时存在Windows上时，他们对应的pip都叫pip.exe，所以不能直接使用 pip install 命令安装软件包，而是依靠py.exe来指定pip版本。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">py <span class="number">-2</span> -m pip install *****  <span class="comment">#python2</span></span><br><span class="line">py <span class="number">-3</span> -m pip install *****  <span class="comment">#python3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>系统优先级</li>
</ul>
<p>按照环境变量的前后，如以 python 2 为 优先：</p>
<p>设置环境变量PATH为:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Python27;C:\Python27\Scripts;C:\Python36\Scripts\;C:\Python36\;</span><br></pre></td></tr></table></figure>

<h4 id="Pyenv"><a href="#Pyenv" class="headerlink" title="Pyenv"></a>Pyenv</h4><p>pyenv是一个forked自ruby社区的简单、低调、遵循UNIX哲学的Python环境管理工具,用于安装和管理多个Python版本。它使开发人员能够快速访问更新版本的Python，并保持系统干净，避免不必要的包膨胀。它还提供了从 Python 的一个版本快速切换到另一个版本的能力，以及指定给定项目使用的Python版本并可以自动切换到该版本, 同时结合vitualenv插件可以方便的管理对应的包源<br>github：<br><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv">https://github.com/pyenv/pyenv</a><br><a target="_blank" rel="noopener" href="https://github.com/pyenv-win/pyenv-win">https://github.com/pyenv-win/pyenv-win</a></p>
<h5 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h5><ul>
<li><p>安装依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev python-openssl git</span><br></pre></td></tr></table></figure>
</li>
<li><p>clone存储库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/pyenv/pyenv.git ~/.pyenv</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 设置一些重要的环境变量并设置 pyenv 自动完成</span></span><br><span class="line">echo &#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line">echo &#x27;export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line">echo -e &#x27;if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n eval &quot;$(pyenv init -)&quot;\nfi&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新启动 shell</span></span><br><span class="line">exec &quot;$SHELL&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出可用的 Python 版本</span></span><br><span class="line">pyenv install --list</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装python版本（Pyenv从源代码构建，时间较长）</span></span><br><span class="line">pyenv install 3.8.10</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证Python版本是否已安装</span></span><br><span class="line">pyenv versions</span><br><span class="line"><span class="meta">#</span><span class="bash"> 将Python的版本更改为 3.8.10并放入 python shell</span></span><br><span class="line">pyenv global 3.8.10</span><br><span class="line">python</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令</p>
<p>参阅 <code>pyenv help &lt;command&gt;</code></p>
<ul>
<li><strong>–version</strong> :: 显示 pyenv命令的版本列出所有可用的 pyenv 命令</li>
<li><strong>exec</strong> :: 使用选定的 Python 版本运行可执行文件</li>
<li><strong>global</strong> :: 设置或显示全局 Python 版本</li>
<li><strong>help</strong> :: 显示命令的帮助</li>
<li><strong>hooks</strong> :: 列出给定 pyenv 命令的钩子脚本</li>
<li><strong>init</strong> :: 配置pyenv的shell环境</li>
<li><strong>install</strong> :: 使用 python-build 安装 Python 版本</li>
<li><strong>local</strong> :: 设置或显示本地应用程序特定的 Python 版本</li>
<li><strong>prefix</strong> :: 显示 Python 版本的前缀</li>
<li><strong>rehash</strong> :: Rehash pyenv shims（在安装可执行文件后运行）</li>
<li><strong>root</strong> :: 显示保存版本和垫片的根目录</li>
<li><strong>shell</strong> :: 设置或显示特定于 shell 的 Python 版本</li>
<li><strong>shims</strong>:: 列出现有的 pyenv 垫片</li>
<li><strong>uninstall</strong>:: 卸载特定的 Python 版本</li>
<li><strong>version</strong> :: 显示当前的 Python 版本及其来源</li>
<li><strong>version-file</strong> :: 检测设置当前pyenv版本的文件</li>
<li><strong>version-name</strong> :: 显示当前 Python 版本</li>
<li><strong>version-origin</strong> ::解释当前 Python 版本是如何设置的</li>
<li><strong>versions</strong>::列出 pyenv 可用的所有 Python 版本</li>
<li><strong>whence</strong> ::列出包含给定可执行文件的所有 Python 版本</li>
<li><strong>which</strong> ::显示可执行文件的完整路径</li>
</ul>
</li>
</ul>
<h5 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h5><ul>
<li><p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install pyenv-win</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令</p>
<ul>
<li>commands 列出所有可用的 pyenv 命令</li>
<li>local 设置或显示本地应用程序特定的 Python 版本</li>
<li>global 设置或显示全局 Python 版本</li>
<li>shell 设置或显示特定于 shell 的 Python 版本</li>
<li>install 安装 1 个或多个版本的 Python</li>
<li>uninstall 卸载 1 个或多个版本的</li>
<li>Python Python更新 更新缓存版本 DB </li>
<li>rehash Rehash pyenv shims（在切换 Python 版本后运行）</li>
<li>vname 显示当前 Python</li>
<li>version 显示当前 Python 版本及其原始</li>
<li>version-name 显示当前 Python</li>
<li>versions 列出 pyenv 可用的所有 Python 版本</li>
<li>exec 通过首先准备 PATH 来运行可执行文件，以便选择的 Python</li>
<li>which 显示可执行文件的完整路径，</li>
<li>whence 列出包含给定可执行文件的所有 Python 版本</li>
</ul>
</li>
</ul>
<h3 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h3><ul>
<li>更新</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pip   </span><br></pre></td></tr></table></figure>

<h4 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h4><ul>
<li>查看</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config list</span><br></pre></td></tr></table></figure>

<ul>
<li>设置</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure>

<ul>
<li>常用源</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 阿里云</span></span><br><span class="line">https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 清华大学</span></span><br><span class="line">https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 中国科技大学</span></span><br><span class="line">https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 中国科学技术大学</span></span><br><span class="line">https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 豆瓣</span></span><br><span class="line">https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure>

<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&quot;(py -2/3 -m)pip&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">查看已经安装的第三方库	    </span></span><br><span class="line">pip list</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装第三方库	            </span></span><br><span class="line">pip install  库名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看安装库的详细信息	    </span></span><br><span class="line">pip show 库名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载第三方库	            </span></span><br><span class="line">pip uninstall 库名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载pip	                    </span></span><br><span class="line">python -m pip uninstall pip</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查哪些包需要更新	        </span></span><br><span class="line">pip list --outdated</span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级包	                    </span></span><br><span class="line">pip install --upgrade SomePackage</span><br><span class="line">centos自带python2.7.5安装pip yum install -y python-pip</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="安装指定版本"><a href="#安装指定版本" class="headerlink" title="安装指定版本"></a>安装指定版本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">只需通过 == 操作符指定</span></span><br><span class="line">pip install robotframework==2.8.7</span><br></pre></td></tr></table></figure>

<h4 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip升级format问题：</span><br><span class="line">先确保你在~/.pip   目录下有文件pip.conf</span><br><span class="line">如果没有就创建这个文件：vim ~/.pip/pip.conf</span><br><span class="line">在pip.conf文件里面加入代码：</span><br><span class="line">[list] </span><br><span class="line">format=columns</span><br></pre></td></tr></table></figure>

<h3 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h3><p>确保 Python 已经具备虚拟环境配置库：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>

<p>在某一文件夹下创建虚拟环境：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv venv</span><br></pre></td></tr></table></figure>

<p>虚拟环境生效<br><code>使用虚拟环境的二进制目录中的脚本来“激活”该环境。不同平台调用的脚本是不同的（须将 &lt;venv&gt; 替换为包含虚拟环境的目录路径）</code></p>
<table>
<thead>
<tr>
<th align="left">平台</th>
<th align="left">Shell</th>
<th align="left">用于激活虚拟环境的命令</th>
</tr>
</thead>
<tbody><tr>
<td align="left">POSIX</td>
<td align="left">bash/zsh/git-bash</td>
<td align="left">$ source <venv>/bin/activate</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">fish</td>
<td align="left">$ source <venv>/bin/activate.fish</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">csh/tcsh</td>
<td align="left">$ source <venv>/bin/activate.csh</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">PowerShell Core</td>
<td align="left">$ <venv>/bin/Activate.ps1</td>
</tr>
<tr>
<td align="left">Windows</td>
<td align="left">cmd.exe</td>
<td align="left">C:&gt; <venv>\Scripts\activate.bat</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">PowerShell</td>
<td align="left">PS C:&gt; <venv>\Scripts\Activate.ps1</td>
</tr>
</tbody></table>
<h3 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. 变量命名总结：</span><br><span class="line">- 单下划线开头变量：protected</span><br><span class="line">- 双下划线开头变量：private</span><br><span class="line">- 双下划线开头，双下划线结尾：系统内置变量</span><br><span class="line">2. 函数命名总结：</span><br><span class="line">- 私有方法：小写和一个前导下划线</span><br><span class="line">- 特殊方法（魔术方法）：小写和两个前导下划线，两个后置下划线</span><br><span class="line">- 函数参数：小写和下划线，缺省值等号两边无空格</span><br><span class="line">3. 类名称命名：</span><br><span class="line">- 类总是使用驼峰格式命名，即所有单词首字母大写其余字母小写</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">★类名称命名：</span></span><br><span class="line"><span class="string">类总是使用驼峰格式命名，即所有单词首字母大写其余字母小写。</span></span><br><span class="line"><span class="string">类名应该简明，精确，并足以从中理解类所完成的工作。</span></span><br><span class="line"><span class="string">常见的一个方法是使用表示其类型或者特性的后缀，例如:SQLEngine ，MimeTypes</span></span><br><span class="line"><span class="string">对于基类而言，可以使用一个 Base 或者 Abstract 前缀</span></span><br><span class="line"><span class="string">不要滥用 *args 和 **kwargs，可能会破坏函数的健壮性</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 变量命名总结：</span></span><br><span class="line"><span class="comment"># 1.单下划线开头变量：protected</span></span><br><span class="line"><span class="comment"># 2.双下划线开头变量：private</span></span><br><span class="line"><span class="comment"># 3.双下划线开头，双下划线结尾：系统内置变量</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">单下划线开头变量</span></span><br><span class="line"><span class="string">_xxx，单下划线开头的变量，标明是一个受保护(protected)的变量，原则上不允许直接访问，但外部类还是可以访问到这个变量。</span></span><br><span class="line"><span class="string">这只是程序员之间的一个约定，用于警告说明这是一个私有变量，外部类不要去访问它。</span></span><br><span class="line"><span class="string">print(stu._name) 当要输入_name时，pycharm不会进行_name的提示</span></span><br><span class="line"><span class="string">print(stu.age) 当要显示age时，pycharm会进行age的提示</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, sex</span>):</span></span><br><span class="line">self._name = name</span><br><span class="line">self.sex = sex</span><br><span class="line">stu = Student(<span class="string">&#x27;zyf&#x27;</span>, <span class="string">&#x27;Male&#x27;</span>)</span><br><span class="line">print(stu._name) <span class="comment"># 单下划线protected的变量，原则上不允许直接访问 输出：zyf</span></span><br><span class="line">print(stu.sex) <span class="comment"># age可以直接访问 输出：Male</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">双下划线开头</span></span><br><span class="line"><span class="string">__xxx，双下划线开头的，表示的是私有类型(private)的变量。</span></span><br><span class="line"><span class="string">只能是允许这个类本身进行访问了, 连子类也不可以.</span></span><br><span class="line"><span class="string">用于命名一个类属性（类变量）,调用时名字被改变</span></span><br><span class="line"><span class="string">（在类Student内部，__name变成_Student__name,如 self._Student__name)</span></span><br><span class="line"><span class="string">双下划线开头的实例变量是不是一定不能从外部访问呢？其实也不是。仍然可以通过_Student__name来访问__name变量：</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">self.__name = name</span><br><span class="line">per = Person(<span class="string">&#x27;zyf2&#x27;</span>)</span><br><span class="line">print(per._Person__name) <span class="comment"># 输出zyf2 但是无法直接访问__name</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">双下划线开头，并且以双下划线结尾</span></span><br><span class="line"><span class="string">__xxx__，以双下划线开头，并且以双下划线结尾的，是内置变量.</span></span><br><span class="line"><span class="string">内置变量是可以直接访问的，不是 private 变量，如__init__，__import__或是__file__。</span></span><br><span class="line"><span class="string">★不要自己定义这类变量</span></span><br><span class="line"><span class="string">xxx_，单下划线结尾的变量一般只是为了避免与 Python 关键字的命名冲突</span></span><br><span class="line"><span class="string">USER_CONSTANT，大写加下划线，对于不会发生改变的全局变量，使用大写加下划线</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数命名总结：</span></span><br><span class="line"><span class="comment"># 1.私有方法：小写和一个前导下划线</span></span><br><span class="line"><span class="comment"># 2.特殊方法（魔术方法）：小写和两个前导下划线，两个后置下划线</span></span><br><span class="line"><span class="comment"># 3.函数参数：小写和下划线，缺省值等号两边无空格</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">函数</span></span><br><span class="line"><span class="string">总体而言应该使用，小写和下划线</span></span><br><span class="line"><span class="string">私有方法 ： 小写和一个前导下划线</span></span><br><span class="line"><span class="string">这里和私有变量一样，并不是真正的私有访问权限。</span></span><br><span class="line"><span class="string">同时也应该注意一般函数不要使用两个前导下划线(当遇到两个前导下划线时，Python 的名称改编特性将发挥作用)。特殊函数后面会提及。</span></span><br><span class="line"><span class="string">#特殊方法 ： 小写和两个前导下划线，两个后置下划线</span></span><br><span class="line"><span class="string">#这种风格只应用于特殊函数，比如操作符重载等。</span></span><br><span class="line"><span class="string">#函数参数 : 小写和下划线，缺省值等号两边无空格</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 私有方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrivateCase</span>:</span></span><br><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_secrete</span>():</span></span><br><span class="line">print(<span class="string">r&quot;Don&#x27;t test me&quot;</span>)</span><br><span class="line">priC = PrivateCase()</span><br><span class="line">priC._secrete() <span class="comment"># _secrete为protected member</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 特殊方法（魔术方法）</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__add__</span>(<span class="params">self, other</span>):</span></span><br><span class="line"><span class="keyword">return</span> int.__add__(other)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">self, user=None</span>):</span></span><br><span class="line">self._user = user</span><br></pre></td></tr></table></figure>

<h3 id="常用类库"><a href="#常用类库" class="headerlink" title="常用类库"></a>常用类库</h3><h4 id="str"><a href="#str" class="headerlink" title="str"></a>str</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>是否以start开头：str.startswith(<span class="string">&#x27;start&#x27;</span>)</span><br><span class="line">是否以end结尾：str.endswith(<span class="string">&#x27;end&#x27;</span>)</span><br><span class="line">是否全为字母或数字：str.isalnum()</span><br><span class="line">是否全字母：str.isalpha()</span><br><span class="line">是否全数字：str.isdigit()</span><br><span class="line">是否全⼩写：str.islower()</span><br><span class="line">是否全⼤写：str.isupper()</span><br><span class="line"><span class="number">2.</span>全部⼤写：str.upper()</span><br><span class="line">全部⼩写：str.lower()</span><br><span class="line">⼤⼩写互换：str.swapcase()</span><br><span class="line">⾸字母⼤写，其余⼩写：str.capitalize()</span><br><span class="line">⾸字母⼤写：str.title()</span><br><span class="line"><span class="number">3.</span>搜索指定字符串，没有返回<span class="number">-1</span>：str.find(<span class="string">&#x27;t&#x27;</span>)</span><br><span class="line">指定起始位置搜索：str.find(<span class="string">&#x27;t&#x27;</span>,start)</span><br><span class="line">指定起始及结束位置搜索：str.find(’t<span class="string">&#x27;,start,end)</span></span><br><span class="line"><span class="string">从右边开始查找：str.rfind(&#x27;</span>t<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">搜索到多少个指定字符串：str.count(&#x27;</span>t<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">上⾯所有⽅法都可⽤index代替，不同的是使⽤</span></span><br><span class="line"><span class="string">index查找不到会抛异常，⽽find返回-1</span></span><br><span class="line"><span class="string">1. 替换old为new：str.replace(&#x27;</span>old<span class="string">&#x27;,&#x27;</span>new<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">替换指定次数的old为new：</span></span><br><span class="line"><span class="string">str.replace(‘old&#x27;</span>,<span class="string">&#x27;new&#x27;</span>,maxReplaceTimes)</span><br><span class="line"><span class="number">2.</span> 去两边空格：str.strip()</span><br><span class="line">去左空格：str.lstrip()</span><br><span class="line">去右空格：str.rstrip()</span><br><span class="line">去两边字符串：str.strip(‘d’)</span><br><span class="line">相应的也有lstrip，rstrip</span><br><span class="line"><span class="number">3.</span> str.join() ⽅法⽤于将序列中的元素以指</span><br><span class="line">定的字符连接⽣成⼀个新的字符串。</span><br><span class="line">s1.join(seq),s1=“-“,seq是你要连接的序列</span><br><span class="line"><span class="number">4.</span> print(<span class="string">&#x27;Hi, %s, you have $%d.&#x27;</span> % (<span class="string">&#x27;linda&#x27;</span>,</span><br><span class="line"><span class="number">100000000</span>))</span><br><span class="line">print(<span class="string">&#x27;Hello, &#123;0&#125;, 成绩提升了</span></span><br><span class="line"><span class="string">&#123;1:.1f&#125;%&#x27;</span>.format(<span class="string">&#x27;⼩明&#x27;</span>, <span class="number">17.125</span>))</span><br></pre></td></tr></table></figure>

<h4 id="os"><a href="#os" class="headerlink" title="os"></a>os</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">os.sep:取代操作系统特定的路径分隔符</span><br><span class="line">os.name:指⽰你正在使⽤的⼯作平台。⽐如对于Windows，它是<span class="string">&#x27;nt&#x27;</span>，⽽对于Linux/Unix⽤户，它是<span class="string">&#x27;posix&#x27;</span>。</span><br><span class="line">os.getcwd:得到当前⼯作⽬录，即当前python脚本⼯作的⽬录路径。</span><br><span class="line">os.getenv()和os.putenv:分别⽤来读取和设置环境变量</span><br><span class="line">os.listdir():返回指定⽬录下的所有⽂件和⽬录名</span><br><span class="line">os.remove(file):删除⼀个⽂件</span><br><span class="line">os.stat（file）:获得⽂件属性</span><br><span class="line">os.chmod(file):修改⽂件权限和时间戳</span><br><span class="line">os.mkdir(name):创建⽬录</span><br><span class="line">os.rmdir(name):删除⽬录</span><br><span class="line">os.removedirs（r“c：\python”）:删除多个⽬录</span><br><span class="line">os.system():运⾏shell命令</span><br><span class="line">os.exit():终⽌当前进程</span><br><span class="line">os.linesep:给出当前平台的⾏终⽌符。例如，Windows使⽤<span class="string">&#x27;\r\n&#x27;</span>，Linux使⽤<span class="string">&#x27;\n&#x27;</span>⽽Mac使⽤<span class="string">&#x27;\r&#x27;</span></span><br><span class="line">os.path.split():返回⼀个路径的⽬录名和⽂件名</span><br><span class="line">os.path.isfile()和os.path.isdir()分别检验给出的路径是⼀个⽬录还是⽂件</span><br><span class="line">os.path.existe():检验给出的路径是否真的存在</span><br><span class="line">os.listdir(dirname):列出dirname下的⽬录和⽂件</span><br><span class="line">os.getcwd():获得当前⼯作⽬录</span><br><span class="line">os.curdir:返回当前⽬录（<span class="string">&#x27;.&#x27;</span>）</span><br><span class="line">os.chdir(dirname):改变⼯作⽬录到dirname</span><br><span class="line">os.path.isdir(name):判断name是不是⽬录，不是⽬录就返回false</span><br><span class="line">os.path.isfile(name):判断name这个⽂件是否存在，不存在返回false</span><br><span class="line">os.path.exists(name):判断是否存在⽂件或⽬录name</span><br><span class="line">os.path.getsize(name):或得⽂件⼤⼩，如果name是⽬录返回<span class="number">0L</span></span><br><span class="line">os.path.abspath(name):获得绝对路径</span><br><span class="line">os.path.isabs():判断是否为绝对路径</span><br><span class="line">os.path.normpath(path):规范path字符串形式</span><br><span class="line">os.path.split(name):分割⽂件名与⽬录（事实上，如果你完全使⽤⽬录，它也会将最后⼀个⽬录作为⽂件名⽽分离，同时它不会判断⽂件或⽬录是否存在）</span><br><span class="line">os.path.splitext():分离⽂件名和扩展名</span><br><span class="line">os.path.join(path,name):连接⽬录与⽂件名或⽬录</span><br><span class="line">os.path.basename(path):返回⽂件名</span><br><span class="line">os.path.dirname(path):返回⽂件路径</span><br></pre></td></tr></table></figure>

<h4 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">AssertionError 断⾔语句（<span class="keyword">assert</span>）失败</span><br><span class="line">AttributeError 尝试访问未知的对象属性</span><br><span class="line">EOFError ⽤户输⼊⽂件末尾标志EOF（Ctrl+d）</span><br><span class="line">ImportError 导⼊模块失败的时候</span><br><span class="line">IndexError 索引超出序列的范围</span><br><span class="line">KeyError 字典中查找⼀个不存在的关键字</span><br><span class="line">KeyboardInterrupt ⽤户输⼊中断键（Ctrl+c）</span><br><span class="line">MemoryError 内存溢出（可通过删除对象释放内存）</span><br><span class="line">NameError 尝试访问⼀个不存在的变量</span><br><span class="line">NotImplementedError 尚未实现的⽅法</span><br><span class="line">OSError 操作系统产⽣的异常（例如打开⼀个不存在的⽂件）</span><br><span class="line">OverflowError 数值运算超出最⼤限制</span><br><span class="line">RuntimeError ⼀般的运⾏时错误</span><br><span class="line">StopIteration 迭代器没有更多的值</span><br><span class="line">SyntaxError Python的语法错误</span><br><span class="line">IndentationError 缩进错误</span><br><span class="line">TabError Tab和空格混合使⽤</span><br><span class="line">SystemError Python编译器系统错误</span><br><span class="line">SystemExit Python编译器进程被关闭</span><br><span class="line">TypeError 不同类型间的⽆效操作</span><br><span class="line">UnboundLocalError 访问⼀个未初始化的本地变量（NameError的⼦类）</span><br><span class="line">ValueError 传⼊⽆效的参数</span><br><span class="line">ZeroDivisionError 除数为零</span><br></pre></td></tr></table></figure>

<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><h4 id="python连接数据库"><a href="#python连接数据库" class="headerlink" title="python连接数据库"></a>python连接数据库</h4><p>pyton连接数据库需要先安装pymysql模块：pip install pymysql<br>安装完成后导入pymysql模块：import pymysql<br>python连接数据库主要分五个步骤：<br>step1：连接数据库<br>step2：创建游标对象<br>step3：对数据库进行增删改查<br>step4：关闭游标<br>step5：关闭连接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 连接数据库，</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    password=<span class="string">&#x27;redhat&#x27;</span>,</span><br><span class="line">    db=<span class="string">&#x27;helloTest&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">       <span class="comment"># autocommit=True,    # 如果插入数据，， 是否自动提交? 和conn.commit()功能一致。</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># ****python, 必须有一个游标对象， 用来给数据库发送sql语句， 并执行的.</span></span><br><span class="line"><span class="comment"># 2. 创建游标对象，</span></span><br><span class="line">cur = conn.cursor()</span><br><span class="line"><span class="comment"># 3. 对于数据库进行增删改查</span></span><br><span class="line"><span class="comment"># 1). ************************创建数据表**********************************</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    create_sqli = <span class="string">&quot;create table hello (id int, name varchar(30));&quot;</span></span><br><span class="line">    cur.execute(create_sqli)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">&quot;创建数据表失败:&quot;</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&quot;创建数据表成功;&quot;</span>)</span><br><span class="line"><span class="comment">## 2). *********************插入数据****************************</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    insert_sqli = <span class="string">&quot;insert into hello values(2, &#x27;fensi&#x27;);&quot;</span></span><br><span class="line">    cur.execute(insert_sqli)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">&quot;插入数据失败:&quot;</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 如果是插入数据， 一定要提交数据， 不然数据库中找不到要插入的数据;</span></span><br><span class="line">    conn.commit()</span><br><span class="line">    print(<span class="string">&quot;插入数据成功;&quot;</span>)</span><br><span class="line"><span class="comment"># 3). *********************插入多条数据****************************</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    info = [(i, <span class="string">&quot;westos%s&quot;</span> %(i)) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># *********************第一种方式********************</span></span><br><span class="line">    <span class="comment"># %s必须手动添加一个字符串， 否则就是一个变量名， 会报错.</span></span><br><span class="line">    insert_sqli = <span class="string">&quot;insert into hello values(%d, &#x27;%s&#x27;);&quot;</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> info:</span><br><span class="line">        print(<span class="string">&#x27;insert语句:&#x27;</span>, insert_sqli %item)</span><br><span class="line">        cur.execute(insert_sqli %item)</span><br><span class="line"></span><br><span class="line">     <span class="comment"># *********************第二种方式********************</span></span><br><span class="line">    insert_sqli = <span class="string">&quot;insert into hello values(%s, %s);&quot;</span></span><br><span class="line">     cur.executemany(insert_sqli, info )</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">&quot;插入多条数据失败:&quot;</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 如果是插入数据， 一定要提交数据， 不然数据库中找不到要插入的数据;</span></span><br><span class="line">    conn.commit()</span><br><span class="line">    print(<span class="string">&quot;插入多条数据成功;&quot;</span>)</span><br><span class="line"><span class="comment"># 4). **************************数据库查询*****************************</span></span><br><span class="line">sqli = <span class="string">&quot;select * from hello;&quot;</span></span><br><span class="line">result = cur.execute(sqli)  <span class="comment"># 默认不返回查询结果集， 返回数据记录数。</span></span><br><span class="line">print(result)</span><br><span class="line">print(cur.fetchone())     <span class="comment"># 1). 获取下一个查询结果集;</span></span><br><span class="line">print(cur.fetchone())</span><br><span class="line">print(cur.fetchone())</span><br><span class="line">print(cur.fetchmany(<span class="number">4</span>))   <span class="comment"># 2). 获取制定个数个查询结果集；</span></span><br><span class="line">info = cur.fetchall()     <span class="comment"># 3). 获取所有的查询结果</span></span><br><span class="line">print(info)</span><br><span class="line">print(len(info))</span><br><span class="line">print(cur.rowcount)       <span class="comment"># 4). 返回执行sql语句影响的行数</span></span><br><span class="line"><span class="comment">#  5). 移动游标指针</span></span><br><span class="line">print(cur.fetchmany(<span class="number">3</span>))</span><br><span class="line">print(<span class="string">&quot;正在移动指针到最开始......&quot;</span>)</span><br><span class="line">cur.scroll(<span class="number">0</span>, <span class="string">&#x27;absolute&#x27;</span>)</span><br><span class="line">print(cur.fetchmany(<span class="number">3</span>))</span><br><span class="line">print(<span class="string">&quot;正在移动指针到倒数第2个......&quot;</span>)</span><br><span class="line">print(cur.fetchall())    <span class="comment"># 移动到最后</span></span><br><span class="line">cur.scroll(<span class="number">-2</span>, mode=<span class="string">&#x27;relative&#x27;</span>)</span><br><span class="line">print(cur.fetchall())</span><br><span class="line"><span class="comment"># 4. 关闭游标</span></span><br><span class="line">cur.close()</span><br><span class="line"><span class="comment"># 5. 关闭连接</span></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h4 id="获取表的字段名和信息"><a href="#获取表的字段名和信息" class="headerlink" title="获取表的字段名和信息"></a>获取表的字段名和信息</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先导入所需要的模块</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment">#然后进入主程序部分：此部分用with语句编写（with语句实现的效果是: with语句执行结束， 如果成功， 则提交改变的数据， 如果不成功， 则回滚.）</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    password=<span class="string">&#x27;redhat&#x27;</span>,</span><br><span class="line">    db=<span class="string">&#x27;helloTest&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">    <span class="comment"># autocommit=True,    # 如果插入数据，， 是否自动提交? 和conn.commit()功能一致。</span></span><br><span class="line">) 	<span class="comment">#连接数据库</span></span><br><span class="line"><span class="keyword">with</span> conn:	<span class="comment">#主程序with语句部分</span></span><br><span class="line">    <span class="comment"># ****** 判断是否连接? </span></span><br><span class="line">    print(conn.open)  <span class="comment"># True</span></span><br><span class="line">    <span class="comment"># 2. 创建游标对象，</span></span><br><span class="line">    cur = conn.cursor()</span><br><span class="line">    <span class="comment"># 3).</span></span><br><span class="line">    sqli = <span class="string">&quot;select * from hello;&quot;</span></span><br><span class="line">    result = cur.execute(sqli)  <span class="comment"># 默认不返回查询结果集， 返回数据记录数。</span></span><br><span class="line">    <span class="comment"># 显示每列的详细信息</span></span><br><span class="line">    des = cur.description</span><br><span class="line">    print(<span class="string">&quot;表的描述:&quot;</span>, des)</span><br><span class="line">	<span class="comment"># 获取表头</span></span><br><span class="line">    print(<span class="string">&quot;表头:&quot;</span>, <span class="string">&quot;,&quot;</span>.join([item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> des]))</span><br><span class="line">    cur.close() 	<span class="comment">#关闭游标，with语句内部</span></span><br><span class="line"> conn.close()	<span class="comment">#关闭指针，with语句外部</span></span><br><span class="line">print(<span class="string">&quot;with语句之外:&quot;</span>, conn.open)   <span class="comment"># 正确情况下会是False</span></span><br></pre></td></tr></table></figure>

<h4 id="基于mysql数据库银行转账功能实现"><a href="#基于mysql数据库银行转账功能实现" class="headerlink" title="基于mysql数据库银行转账功能实现"></a>基于mysql数据库银行转账功能实现</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#银行转账系统考虑因素主要包括：</span></span><br><span class="line"><span class="comment">#1). 判断两个银行卡号是否存在?</span></span><br><span class="line"><span class="comment">#2). 判断source_id是否有足够的钱？</span></span><br><span class="line"><span class="comment">#3). source_id扣钱</span></span><br><span class="line"><span class="comment">#4). target_id加钱</span></span><br><span class="line"><span class="comment">#测试时，首先在数据库中构造数据表bankData,在数据表中添加用户信息（包括用户帐号和账户内金额）</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TransferMoney</span>(<span class="params">object</span>):</span></span><br><span class="line">    <span class="comment"># 构造方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, conn</span>):</span></span><br><span class="line">        self.conn = conn</span><br><span class="line">        self.cur = conn.cursor()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transfer</span>(<span class="params">self, source_id, target_id, money</span>):</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> self.check_account_avaialbe(source_id):</span><br><span class="line">            <span class="keyword">raise</span>  Exception(<span class="string">&quot;账户不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.check_account_avaialbe(target_id):</span><br><span class="line">            <span class="keyword">raise</span>  Exception(<span class="string">&quot;账户不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> self.has_enough_money(source_id, money):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.reduce_money(source_id, money)</span><br><span class="line">                self.add_money(target_id, money)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                print(<span class="string">&quot;转账失败:&quot;</span>, e)</span><br><span class="line">                self.conn.rollback()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.conn.commit()</span><br><span class="line">                print(<span class="string">&quot;%s给%s转账%s金额成功&quot;</span> % (source_id, target_id, money))</span><br><span class="line">                </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_account_avaialbe</span>(<span class="params">self, acc_id</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;判断帐号是否存在， 传递的参数是银行卡号的id&quot;&quot;&quot;</span></span><br><span class="line">        select_sqli = <span class="string">&quot;select * from bankData where id=%d;&quot;</span> % (acc_id)</span><br><span class="line">        print(<span class="string">&quot;execute sql:&quot;</span>, select_sqli)</span><br><span class="line">        res_count = self.cur.execute(select_sqli)</span><br><span class="line">        <span class="keyword">if</span> res_count == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># raise  Exception(&quot;账户%s不存在&quot; %(acc_id))</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_enough_money</span>(<span class="params">self, acc_id, money</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;判断acc_id账户上金额&gt; money&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 查找acc_id存储金额?</span></span><br><span class="line">        select_sqli = <span class="string">&quot;select money from bankData where id=%d;&quot;</span> % (acc_id)</span><br><span class="line">        print(<span class="string">&quot;execute sql:&quot;</span>, select_sqli)</span><br><span class="line">        self.cur.execute(select_sqli)  <span class="comment"># ((1, 500), )</span></span><br><span class="line">        <span class="comment"># 获取查询到的金额钱数;</span></span><br><span class="line">        acc_money = self.cur.fetchone()[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># 判断</span></span><br><span class="line">        <span class="keyword">if</span> acc_money &gt;= money:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_money</span>(<span class="params">self, acc_id, money</span>):</span></span><br><span class="line">        update_sqli = <span class="string">&quot;update bankData set money=money+%d  where id=%d&quot;</span> % (money, acc_id)</span><br><span class="line">        print(<span class="string">&quot;add money:&quot;</span>, update_sqli)</span><br><span class="line">        self.cur.execute(update_sqli)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reduce_money</span>(<span class="params">self, acc_id, money</span>):</span></span><br><span class="line">        update_sqli = <span class="string">&quot;update bankData set money=money-%d  where id=%d&quot;</span> % (money, acc_id)</span><br><span class="line">        print(<span class="string">&quot;reduce money:&quot;</span>, update_sqli)</span><br><span class="line">        self.cur.execute(update_sqli)</span><br><span class="line">    <span class="comment"># 析构方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.cur.close()</span><br><span class="line">        self.conn.close()</span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 1. 连接数据库，</span></span><br><span class="line">    conn = pymysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;redhat&#x27;</span>,</span><br><span class="line">        db=<span class="string">&#x27;helloTest&#x27;</span>,</span><br><span class="line">        charset=<span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">        autocommit=<span class="literal">True</span>,    <span class="comment"># 如果插入数据，， 是否自动提交? 和conn.commit()功能一致。</span></span><br><span class="line">    )</span><br><span class="line">    trans = TransferMoney(conn)   </span><br><span class="line">    trans.transfer(<span class="number">13997</span>, <span class="number">13998</span>, <span class="number">200</span>)	<span class="comment">#账户13997向13998转账200</span></span><br></pre></td></tr></table></figure>

<h3 id="execl与xmind"><a href="#execl与xmind" class="headerlink" title="execl与xmind"></a>execl与xmind</h3><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p><code>xlrd.biffh.XLRDError: Excel xlsx file; not supported</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 原因是最近xlrd更新到了2.0.1版本，只支持.xls文件。所以pandas.read_excel(‘xxx.xlsx’)会报错。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以安装旧版xlrd</span></span><br><span class="line">pip uninstall xlrd</span><br><span class="line">pip install xlrd==1.2.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可以用openpyxl代替xlrd打开.xlsx文件：</span></span><br><span class="line">df=pandas.read_excel(‘data.xlsx’,engine=‘openpyxl’)</span><br></pre></td></tr></table></figure>

<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">time_count</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrap</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        time_flag = time.time()</span><br><span class="line">        temp_result = func(*args, **kwargs)</span><br><span class="line">        print((<span class="string">&quot;time cost:&quot;</span>, time.time() - time_flag))</span><br><span class="line">        <span class="keyword">return</span> temp_result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@time_count</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loop_time</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x, y):</span><br><span class="line">        time.sleep(random.choice((<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.3</span>)))</span><br><span class="line">        result = x + y</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print((loop_time(<span class="number">1</span>, <span class="number">2</span>)))</span><br></pre></td></tr></table></figure>

<h3 id="远程操作linux"><a href="#远程操作linux" class="headerlink" title="远程操作linux"></a>远程操作linux</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install paramiko</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">第一步：导入paramiko</span><br><span class="line">第二步：创建SSHClient实例对象：ssh &#x3D; paramiko.SSHClient()</span><br><span class="line">第三步：即使没有公钥也可以访问：ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">第四步：连接远程linux机器：ssh.connect(&#39;linux所在机器的host&#39;,SSH端口号一般默认22，‘登录linux的用户名’，‘对应的密码’)</span><br><span class="line">第四步：执行linux命令：ssh.excute_command(&#39;pwd&#39;),执行多条命令用;隔开</span><br><span class="line">第五步：获取输入输出及错误：把第四步赋值给stdin，stdout，stderr &#x3D; ssh.excute_command(&#39;pwd；mkdir aaaa；ls&#39;)</span><br><span class="line">传文件：sftp &#x3D; ssh.open_sftp()   sftp.put(&#39;源文件&#39;,“要拷贝的地址”) sftp.get()--从Linux往Windows拷贝</span><br><span class="line">结束时候一定要加上 ssh.close</span><br></pre></td></tr></table></figure>

<p>example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建SSHClient实例对象</span></span><br><span class="line">ssh = paramiko.SSHClient()</span><br><span class="line"><span class="comment"># 调用方法，标识没有远程机器的公钥，允许访问</span></span><br><span class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"><span class="comment"># 连接远程机器 地址端口用户名密码</span></span><br><span class="line">ssh.connect(<span class="string">&quot;192.168.13.128&quot;</span>,<span class="number">22</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;111111&quot;</span>)</span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line">ssh.exec_command(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">ssh.exec_command(<span class="string">&quot;mkdir test&quot;</span>)</span><br><span class="line">ssh.exec_command(<span class="string">&quot;cd test&quot;</span>)</span><br><span class="line">stdin,stdout,stderr = ssh.exec_command(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">print(stdout.read())</span><br><span class="line">ssh.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"> </span><br><span class="line">ssh = paramiko.SSHClient()</span><br><span class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">ssh.connect(<span class="string">&#x27;192.168.13.128&#x27;</span>,<span class="number">22</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;111111&#x27;</span>)</span><br><span class="line">stdin,stdout,stderr = ssh.exec_command(<span class="string">&#x27;ls&#x27;</span>)</span><br><span class="line">print(stdout.read())</span><br><span class="line">sftp = ssh.open_sftp()</span><br><span class="line">sftp.put(<span class="string">r&#x27;E:\Downloads\test.py&#x27;</span>,<span class="string">&#x27;/home/test.py&#x27;</span>)</span><br><span class="line">stdin,stdout,stderr = ssh.exec_command(<span class="string">&#x27;ls;cd /home;ls;pwd&#x27;</span>)</span><br><span class="line">print(stdout.read())</span><br></pre></td></tr></table></figure>

<h3 id="json比较"><a href="#json比较" class="headerlink" title="json比较"></a>json比较</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> jsoncompare <span class="keyword">import</span> jsoncompare <span class="keyword">as</span> json_comp</span><br><span class="line"></span><br><span class="line">json_comp.long = int</span><br><span class="line">json_comp.unicode = str</span><br><span class="line">json_comp.xrange = range</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;Key&quot;</span>: <span class="string">&quot;managed&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Value&quot;</span>: <span class="string">&quot;yes&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">b = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;Key&quot;</span>: <span class="string">&quot;managed&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Value&quot;</span>: <span class="string">&quot;No&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compare respecting each array&#x27;s order</span></span><br><span class="line">json_comp.are_same(a, b)</span><br><span class="line"></span><br><span class="line">print(json_comp.are_same(a, b)[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<h3 id="python2exe"><a href="#python2exe" class="headerlink" title="python2exe"></a>python2exe</h3><h4 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h4><p>最好用虚拟环境,不加其他无关的依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller </span><br></pre></td></tr></table></figure>

<p>favicon.ico在线制作:<a target="_blank" rel="noopener" href="http://www.favicon-icon-generator.com/">http://www.favicon-icon-generator.com/</a></p>
<h4 id="构建exe执行文件"><a href="#构建exe执行文件" class="headerlink" title="构建exe执行文件"></a>构建exe执行文件</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Pyinstaller -F -w -i mergepdf.ico mergepdf.py</span><br><span class="line"></span><br><span class="line">Pyinstaller -F mergepdf.py 打包exe</span><br><span class="line">Pyinstaller -F -w mergepdf.py 不带控制台的打包</span><br><span class="line">Pyinstaller -F -w -i mergepdf.ico mergepdf.py 打包指定exe图标打包</span><br></pre></td></tr></table></figure>

<p>官方文档:<a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/usage.html">https://pyinstaller.readthedocs.io/en/stable/usage.html</a></p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>-h，–help</th>
<th>查看该模块的帮助信息</th>
</tr>
</thead>
<tbody><tr>
<td>-F，-onefile</td>
<td>产生单个的可执行文件</td>
</tr>
<tr>
<td>-D，–onedir</td>
<td>产生一个目录（包含多个文件）作为可执行程序</td>
</tr>
<tr>
<td>-a，–ascii</td>
<td>不包含 Unicode 字符集支持</td>
</tr>
<tr>
<td>-d，–debug</td>
<td>产生 debug 版本的可执行文件</td>
</tr>
<tr>
<td>-w，–windowed，–noconsolc</td>
<td>指定程序运行时不显示命令行窗口（仅对 Windows 有效）</td>
</tr>
<tr>
<td>-c，–nowindowed，–console</td>
<td>指定使用命令行窗口运行程序（仅对 Windows 有效）</td>
</tr>
<tr>
<td>-o DIR，–out=DIR</td>
<td>指定 spec 文件的生成目录。如果没有指定，则默认使用当前目录来生成 spec 文件</td>
</tr>
<tr>
<td>-p DIR，–path=DIR</td>
<td>设置 Python 导入模块的路径（和设置 PYTHONPATH 环境变量的作用相似）。也可使用路径分隔符（Windows 使用分号，Linux 使用冒号）来分隔多个路径</td>
</tr>
<tr>
<td>-n NAME，–name=NAME</td>
<td>指定项目（产生的 spec）名字。如果省略该选项，那么第一个脚本的主文件名将作为 spec 的名字</td>
</tr>
</tbody></table>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42052836/article/details/82315118">https://blog.csdn.net/weixin_42052836/article/details/82315118</a></p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">bq</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://guobq.github.io/bq/cfdea56c.html">https://guobq.github.io/bq/cfdea56c.html</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://guobq.github.io">bq's notes</a>！</span></div></div><div class="post-copyright valine" id="comments-container"><script src="//unpkg.com/valine@1.4.14/dist/Valine.min.js"></script><script>let arr = location.href.split('/#more')[0].split('/');
let title = arr[arr.length - 1];
if (title === '') {
    title = arr[arr.length - 2];
}
var flag = false;
var gitFun = function () {
    try {
        var valineObj = window.GLOBAL_CONFIG.valine;
        new Valine({
            el: "#comments-container",
            ...valineObj
        });
        flag = true;
    } catch (e) {
        flag = false;
    }
}
var setIn = setInterval(() => {
    if (!flag) {
        gitFun();
    } else {
        clearInterval(setIn);
    }
}, 200);</script></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/bq/92374b12.html"><i class="fas fa-angle-left">&nbsp;</i><span>vmware</span></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2020 ～ 2022 By bq</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>